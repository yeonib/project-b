var Fr=Object.defineProperty;var Es=Object.getOwnPropertyDescriptor;var h=(i,e)=>()=>(i&&(e=i(i=0)),e);var Pi=(i,e)=>{for(var t in e)Fr(i,t,{get:e[t],enumerable:!0})};var m=(i,e,t,r)=>{for(var o=r>1?void 0:r?Es(e,t):e,s=i.length-1,n;s>=0;s--)(n=i[s])&&(o=(r?n(e,t,o):n(o))||o);return r&&o&&Fr(e,t,o),o};var Y,zi=h(()=>{"use strict";Y=class{static get uA(){return navigator.userAgent.toLowerCase()}static get pf(){return(window.navigator?.userAgentData?.platform||window.navigator.platform).toLowerCase()}static get safari(){return/^((?!chrome|android).)*safari/.test(this.uA)}static get safariVersion(){return+(this.uA.match(/version\/[\d.]+.*safari/)||["-1"])[0].replace(/^version\//,"").replace(/ safari$/,"")}static get firefox(){return this.uA.indexOf("firefox")>-1}static get chrome(){return/chrome/.test(this.uA)}static get ie(){return/msie|trident/.test(this.uA)}static get ieMobile(){return/iemobile/.test(this.uA)}static get webkit(){return/webkit/.test(this.uA)}static get operaMini(){return/opera mini/.test(this.uA)}static get edge(){return/edge\/\d./.test(this.uA)}static get ios(){return/ip(hone|[ao]d)/.test(this.uA)}static get mac(){return this.pf.indexOf("mac")>-1}static get windows(){return this.pf.indexOf("win")>-1}static get android(){return/android/.test(this.uA)}static get androidMobile(){return/android.*mobile/.test(this.uA)}static get blackberry(){return/blackberry/.test(this.uA)}static get mobile(){return this.ieMobile||this.blackberry||this.androidMobile||this.ios||this.operaMini}static get mouseWheelEvent(){return"onmousewheel"in document}static get wheelEvent(){return"onwheel"in document}static get keydownEvent(){return"onkeydown"in document}static get touchDevice(){return"ontouchstart"in window}static get mutationObserver(){return"MutationObserver"in window}static get resizeObserver(){return"ResizeObserver"in window}static get intersectionObserver(){return"IntersectionObserver"in window}static get client(){return typeof window<"u"&&typeof window.document<"u"}}});function N(i,e,t,r,o){return r+(o-r)/(t-e)*(i-e)}function xe(i,e,t){return Math.min(Math.max(i,e),t)}function me(i,e,t){return i*(1-t)+e*t}function we(i,e,t,r=!1){return r?i>=Math.min(e,t)&&i<=Math.max(e,t):i>Math.min(e,t)&&i<Math.max(e,t)}function fe(i,e){return(i%e+e)%e}var Mi=h(()=>{"use strict"});var jr=h(()=>{"use strict"});var Ii,Ie,H,Di=h(()=>{"use strict";Ii=i=>i!==void 0,Ie=i=>typeof i=="function",H=i=>typeof i=="number"});var Hr=h(()=>{"use strict";Di()});function ee(i,e){return(e||document).querySelector(i)}function Ne(i,e){return(e||document).querySelectorAll(i)}var Vr=h(()=>{"use strict"});var Br=h(()=>{"use strict"});var Yr=h(()=>{"use strict";Mi()});var pe,qr=h(()=>{"use strict";pe=class{constructor(){this._completed=!1,this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){if(this._completed)throw new Error("Can't resolve promise. Already completed");return this._completed=!0,this._resolve(e),this.promise}reject(e){if(this._completed)throw new Error("Can't reject promise. Already completed");return this._completed=!0,this._reject(e),this.promise}get completed(){return this._completed}}});var Fi,Nr=h(()=>{"use strict";Fi=class{static reset(){this.next=0}static get(e=""){return e+(this.next++).toString(36)}};Fi.next=0});var Ur=h(()=>{"use strict"});function Jt(i){if(!Y.client)throw new Error("URL has to be parsed on the client side");return Ce||(Ce=document.createElement("a")),Ce.href=i,{protocol:Ce.protocol,host:Ce.host,hostname:Ce.hostname,port:Ce.port,pathname:Ce.pathname,search:Ce.search,hash:Ce.hash}}function Wr(i){return`${i.protocol}//${i.host}${i.pathname}${i.search}${i.hash}`}var Ce,Xr=h(()=>{"use strict";zi()});var $r=h(()=>{"use strict"});var O=h(()=>{"use strict";zi();Mi();jr();Hr();Vr();Br();Yr();qr();Nr();Di();Ur();Xr();$r()});function De(){return Y.mobile||window.innerWidth<1024}var Ft=h(()=>{O()});function Ue(i,e){return(t,r)=>{let o=Symbol(r);return t[i]=t[i]||{},t[i][r]=e,Object.defineProperty(t,r,{set(s){this[o]=s},get(){return this[o]}}),t}}async function jt(i,e,t){let r=e[i];for(let o in r)await t(o,r[o],e)}function at(i,e,t=[],r=!1,o){return jt(i,e,async(s,n)=>{let a=n.class,l=n.async===!0,c=t.find(u=>u instanceof a)||o;if(!(!a||!c))if(l&&c instanceof Promise){if(r)throw new Error("await prevented! You can't wait for the injectables here, since there may be unresolved dependencies which would cause a block");e[s]=await c}else e[s]=c})}var dt=h(()=>{"use strict"});function x(i,e=!1){return Ue(Ht,{class:i,async:e})}var Ht,W,ji=h(()=>{"use strict";dt();Ht=Symbol(void 0);W=class i extends Promise{constructor(e={},t){let r,o;super((s,n)=>{r=s,o=n}),this.config=e,this.children=new Map,this._resolved=!1,this._activated=!1,this.defaultConfig={},this.config={...this.defaultConfig,...e},this.resolveFn=r,this.rejectFn=o,t&&this.resolve(t)}static get[Symbol.species](){return Promise}addChild(e,t={},r){let o=new this.child(t,r);return this.children.set(e,o),o}deleteChild(e){let t;return typeof e=="string"?t=e:this.children.forEach((r,o)=>{e===r&&(t=o)}),t?this.children.delete(t):!1}hasChild(e){return this.children.has(e)}getChild(e,t){return!e||!this.hasChild(e)&&t?t:this.children.get(e)}get available(){return this._resolved}get activated(){return this._activated}get child(){return i}get name(){throw new Error("service name not defined for "+this.constructor.name)}activate(){return this._activated=!0,this}async init(){}resolve(e){return this.resolveFn&&!this._resolved&&(this._resolved=!0,this.resolveFn(e)),e}}});function A(i){return e=>(i=typeof i=="string"?{selector:`[data-${i}]`,dataset:i.replace(/-./g,t=>t[1].toUpperCase())}:i,e[ei]=i,e)}var ei,Hi=h(()=>{"use strict";ei=Symbol(void 0)});function q(i,e={}){return Ue(Vi,{key:i,...e})}var Vi,Bi=h(()=>{"use strict";dt();Vi=Symbol(void 0)});function gt(i,e={}){return Ue(Yi,{selector:i,...e})}var Yi,Gr,ti=h(()=>{"use strict";dt();Yi=Symbol(void 0),Gr=Symbol(void 0)});function I(i){return(e,t)=>{if(t)return Ue(ii,{class:vt})(e,t);{let r=new vt(i);return class extends e{constructor(){super(),Promise.all([at(ii,this,[r]),...r.services.map(o=>at(ii,o,[r])),at(Ht,this,r.services,!0,r.voidService)]).then(()=>{typeof this.onCreate=="function"&&this.onCreate()})}}}}}var ii,qi,vt,Zr=h(()=>{"use strict";Hi();Bi();dt();ti();ji();ii=Symbol(void 0),qi=(i,e={},t=!1)=>{let r=e;if(i)try{r=JSON.parse(i)}catch(o){t&&console.warn("could not parse json:",o)}return r};vt=class{constructor(e={}){this.config=e,this.root=document.body,this.components=[],this.voidService=new W,this.initServices(),e.initUpdate!==!1&&this.update()}get services(){return this.config.services||[]}async initServices(){let e=this.config.services;if(e){let t=e.map(r=>r.name);if(t.length!==new Set(t).size)throw new Error("duplicate services found: "+t.join(", "));for(let r=0,o=e.length;r<o;r++)e[r].activate();for(let r=0,o=e.length;r<o;r++)await this.injectService(e[r]);for(let r=0,o=e.length;r<o;r++)e[r].init()}}async injectService(e){await at(Ht,e,this.config.services,!0,this.voidService)}async injectComponent(e){return await Promise.all([at(ii,e.component,[this]),at(Ht,e.component,this.config.services,!1,this.voidService),jt(Yi,e.component,async(t,r,o)=>{let s=e.element.querySelector(r.selector);typeof r.parse=="function"&&(s=r.parse(s)),s&&(o[t]=s)}),jt(Gr,e.component,async(t,r,o)=>{let s=e.element.querySelectorAll(r.selector);typeof r.parse=="function"&&(s=r.parse(s)),s&&(o[t]=s)}),jt(Vi,e.component,async(t,r,o)=>this.parseComponentConfig(e,t,r,o))]),e}parseComponentConfig(e,t,r,o){let s=e.ctor,n=s[ei].dataset;if(!n)throw new Error(`${s.name} component has no dataset attribute defined. Define it with "dataset" in the component decorator.`);let a=e.element.dataset[n],l=r.key.replace(/-./g,v=>v[1].toUpperCase()),c=l.charAt(0).toUpperCase()+l.slice(1),u=e.element.dataset[`${n}${c}`],d=a?qi(a):{},p=r.type||String,g=u===void 0?d[r.key]:u;if(g!==void 0){let v;p===Array?v=[]:p===Object?v={}:v=p(g),p===Boolean&&typeof g=="string"&&g.trim()===""&&(v=!0),p===Boolean&&(g==="0"||g==="no"||g==="false")&&(v=!1),p===Array?g instanceof Array?v=g:typeof g=="string"&&g.startsWith("[")&&(v=qi(g,[],!0)):p===Object&&(g instanceof Object?v=g:typeof g=="string"&&g.startsWith("{")&&(v=qi(g,{},!0))),typeof r.parse=="function"&&(v=r.parse(v)),o[t]=v}}update(e=this.root,t=!0,r=()=>!0){let o=[];return this.collect(e,r,s=>{this.injectComponent(s).then(()=>{let n=Promise.resolve();if(typeof s.component.onCreate=="function"){let a=s.component.onCreate();a instanceof Promise&&(n=a)}typeof s.component.onListen=="function"&&n.then(async()=>{let a=s.component.onListen();a instanceof Promise?s.unlisten=await a:s.unlisten=a})}),o.push(s),this.components.push(s)}),t&&this.purge(),o}collect(e,t,r){(this.config.components||[]).forEach(o=>{let s=o[ei]||{};s.condition&&!s.condition()||e.querySelectorAll(s.selector).forEach(n=>{t(o)&&n instanceof HTMLElement&&!this.components.find(a=>a.component instanceof o&&a.element===n)&&r({ctor:o,component:new o(n),config:s,element:n})})})}purge(){let e=[];this.components.forEach(t=>{if(!this.root.contains(t.element)||!t.element.matches(t.config.selector)){let r=Promise.resolve();if(typeof t.component.onDestroy=="function"){let o=t.component.onDestroy();o instanceof Promise&&(r=o)}r.then(()=>{typeof t.unlisten=="function"&&(t.unlisten(),delete t.unlisten)}),e.push([t,r])}});for(let t=e.length-1;t>=0;t--)e[t][1].then(()=>{let r=this.components.indexOf(e[t][0]);r>-1&&this.components.splice(r,1)})}query(e,t){let r=[];return this.components.forEach(o=>{t&&!t.contains(o.element)&&o.element!==t||o.component instanceof e&&r.push({...o})}),r}}});var z=h(()=>{"use strict";ji();Hi();Zr();dt();Bi()});var F,Kr=h(()=>{"use strict";F=class{constructor(){this.listeners={},this.emitters=[],this.mutedEvents=[]}emit(e,t,r){let o=typeof t=="function"?t:r;if(typeof e=="string"){let s=e;if(!this.isEventMuted(s)){for(let n=0,a=this.emitters.length;n<a;n++)this.emitters[n].emit(e,t,r);this.hasListener(s)&&this.listeners[s].forEach(n=>{let a=n(t!==o?t:void 0);o&&o(a)})}}else{let s=e,n=Object.keys(s);for(let a=0,l=n.length;a<l;a++){let c=n[a],u=s[c];if(!this.isEventMuted(c)){for(let d=0,p=this.emitters.length;d<p;d++)this.emitters[d].emit(c,u,r);this.hasListener(c)&&this.listeners[c].forEach(d=>{let p=d(u);o&&o(p)})}}}return this}hasListener(e){return Object.prototype.hasOwnProperty.call(this.listeners,e)}on(e,t){return this.hasListener(e)?this.listeners[e].add(t):this.listeners[e]=new Set([t]),()=>this.off(e,t)}off(e,t){let r=this.listeners;return this.hasListener(e)?r[e].delete(t):!1}hasEventListeners(e){return this.listeners[e]&&this.listeners[e].size>0}isEventMuted(e){return this.mutedEvents.includes(e)}muteEvents(...e){return e.forEach(t=>{typeof t=="string"&&!this.mutedEvents.includes(t)&&this.mutedEvents.push(t)}),()=>this.unmuteEvents(...e)}unmuteEvents(...e){e.forEach(t=>{if(typeof t=="string"){let r=this.mutedEvents.indexOf(t);r>-1&&this.mutedEvents.splice(r,1)}})}reflectEvents(...e){this.emitters=e}unreflectEvents(){this.emitters=[]}}});var le=h(()=>{"use strict";Kr()});var Qr=h(()=>{"use strict"});function S(i,e,t,r){return typeof e=="string"&&(e=[e]),e.forEach(o=>i.addEventListener(o,t,r)),()=>e.forEach(o=>{i.removeEventListener(o,t,r)})}function Jr(i,e,t,r){let o=S(i,e,(...s)=>{t(...s),o()},r);return o}var eo=h(()=>{"use strict"});function E(...i){return()=>i.forEach(e=>typeof e=="function"&&e())}var to=h(()=>{"use strict"});var M=h(()=>{"use strict";Qr();eo();to()});var y={};Pi(y,{easeInBack:()=>Us,easeInBounce:()=>Ks,easeInCirc:()=>Ys,easeInCubic:()=>Rs,easeInElastic:()=>$s,easeInExpo:()=>Hs,easeInOutBack:()=>Xs,easeInOutBounce:()=>Qs,easeInOutCirc:()=>Ns,easeInOutCubic:()=>Ps,easeInOutElastic:()=>Zs,easeInOutExpo:()=>Bs,easeInOutQuad:()=>Ls,easeInOutQuart:()=>Is,easeInOutQuint:()=>js,easeInOutSine:()=>_s,easeInQuad:()=>Os,easeInQuart:()=>zs,easeInQuint:()=>Ds,easeInSine:()=>Ts,easeOutBack:()=>Ws,easeOutBounce:()=>ri,easeOutCirc:()=>qs,easeOutCubic:()=>ks,easeOutElastic:()=>Gs,easeOutExpo:()=>Vs,easeOutQuad:()=>As,easeOutQuart:()=>Ms,easeOutQuint:()=>Fs,easeOutSine:()=>Cs,linear:()=>Ss});var Ss,Ts,Cs,_s,Os,As,Ls,Rs,ks,Ps,zs,Ms,Is,Ds,Fs,js,Hs,Vs,Bs,Ys,qs,Ns,Us,Ws,Xs,$s,Gs,Zs,Ks,ri,Qs,io=h(()=>{"use strict";Ss=i=>i,Ts=i=>1+Math.sin(Math.PI/2*i-Math.PI/2),Cs=i=>Math.sin(Math.PI/2*i),_s=i=>(1+Math.sin(Math.PI*i-Math.PI/2))/2,Os=i=>i*i,As=i=>i*(2-i),Ls=i=>i<.5?2*i*i:-1+(4-2*i)*i,Rs=i=>i*i*i,ks=i=>--i*i*i+1,Ps=i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,zs=i=>i*i*i*i,Ms=i=>1- --i*i*i*i,Is=i=>i<.5?8*i*i*i*i:1-8*--i*i*i*i,Ds=i=>i*i*i*i*i,Fs=i=>1+--i*i*i*i*i,js=i=>i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i,Hs=i=>i===0?0:Math.pow(2,10*i-10),Vs=i=>i===1?1:1-Math.pow(2,-10*i),Bs=i=>i===0?0:i===1?1:i<.5?Math.pow(2,20*i-10)/2:(2-Math.pow(2,-20*i+10))/2,Ys=i=>1-Math.sqrt(1-Math.pow(i,2)),qs=i=>Math.sqrt(1-Math.pow(i-1,2)),Ns=i=>i<.5?(1-Math.sqrt(1-Math.pow(2*i,2)))/2:(Math.sqrt(1-Math.pow(-2*i+2,2))+1)/2,Us=i=>2.70158*i*i*i-1.70158*i*i,Ws=i=>1+2.70158*Math.pow(i-1,3)+1.70158*Math.pow(i-1,2),Xs=i=>{let t=2.5949095;return i<.5?Math.pow(2*i,2)*((t+1)*2*i-t)/2:(Math.pow(2*i-2,2)*((t+1)*(i*2-2)+t)+2)/2},$s=i=>(.04-.04/i)*Math.sin(25*i)+1,Gs=i=>.04*i/--i*Math.sin(25*i),Zs=i=>(i-=.5)<0?(.02+.01/i)*Math.sin(50*i):(.02-.01/i)*Math.sin(50*i)+1,Ks=i=>1-ri(1-i),ri=i=>i<.36363636363636365?7.5625*i*i:i<.7272727272727273?7.5625*(i-=.5454545454545454)*i+.75:i<.9090909090909091?7.5625*(i-=.8181818181818182)*i+.9375:7.5625*(i-=.9545454545454546)*i+.984375,Qs=i=>i<.5?(1-ri(1-2*i))/2:(1+ri(2*i-1))/2});var ro,U,oo=h(()=>{"use strict";ro=class{constructor(i=!1){this.override=i,this.ticking=!1,this.tasks=[],this.time=0,this.override||this.loop()}static now(){return this.main.time}tick(i){for(let e=0,t=this.tasks.length;e<t;e++){let r=this.tasks[e];!r||r.dead||r.update(i-this.time,this.time-r.start,r.kill)}this.time=i}loop(){this.ticking=!0,window.requestAnimationFrame(i=>{this.tick(i),this.override?this.ticking=!1:this.loop()})}add(i,e=0){let t={update:i,order:e,start:this.time,dead:!1,kill:()=>{t.dead=!0,this.tasks.splice(this.tasks.indexOf(t),1)}};return this.tasks.push(t),this.tasks.sort((r,o)=>r.order-o.order),t}},U=ro;U.main=new ro});var We=h(()=>{"use strict";oo()});var de,yt=h(()=>{"use strict";We();de=class{constructor(e={}){this.config=e,this.ticker=U.main,this._overridden=!1,this._duration=0,this.listeners=new Map,this._resolved=!1,this._paused=!1,this._passed=0,this._progress=0,this._reversed=!1,this._started=!1,this.lastProgress=0,this.lastDelay=0,this._duration=typeof e.duration<"u"?e.duration:500}callback(e,t=[]){typeof e=="function"&&e(...t)}beforeStart(){}beforeStop(){}beforeSeek(){}onStart(e){return this.setListener("onStart",e),this}onComplete(e){return this.setListener("onComplete",e),this}onStop(e){return this.setListener("onStop",e),this}callListeners(e,t=[]){let r=this.listeners.get(e);r&&r.forEach(o=>o(...t))}setListener(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}get progress(){return this._progress}get delay(){return this.config.delay||0}get duration(){return this._duration+this.delay}get paused(){return this._paused}get complete(){return this._resolved}get passed(){return this._progress*this.duration}get reversed(){return this._reversed}get ticking(){return!!this.task}resolve(){this.resolveFn&&!this._resolved&&this.resolveFn(),this._resolved=!0}override(){return this._overridden=!0,this}start(e=0,t=!1){return this._overridden?this:(this.beforeStart(),t||this.reset(0,!0),this.task=this.ticker.add((r,o)=>{this._paused||this.seek(e+o)}),this)}resume(){this.pause(!1)}pause(e=!0){return this._paused!==e&&(this._paused=e,e&&this.task&&(this.task.kill(),delete this.task),e?this.callback(this.config.onPause):this.callback(this.config.onResume),!e&&!this.task&&this.start(this._passed,!0)),this}stop(e=!1){let t=this.ticking,r=this._started;return this._started=!1,t&&this.task&&(this.task.kill(),delete this.task),this.beforeStop(),!e&&r&&(this.callback(this.config.onStop,[t]),this.callListeners("onStop",[t])),this}hasStarted(e){return!this._reversed&&e>0||this._reversed&&e<this.duration}seekDelay(e,t=!1,r=!1){let o=t?0:this.delay;if(o>0){if(!t&&e<=o)return r||this.callback(this.config.onDelay,[e,e/o]),this.lastDelay=e,!1;!t&&e>=o&&this.lastDelay!==o&&(r||this.callback(this.config.onDelay,[o,1]),this.lastDelay=o)}return!0}preSeek(e,t=!1){return this._resolved?!1:(!this._started&&!t&&this.hasStarted(e)&&(this._started=!0,this.callback(this.config.onStart),this.callListeners("onStart"),this.beforeSeek()),!0)}seek(e,t=!1,r=!1){if(!this.preSeek(e,r))return this;this._reversed&&(e=this.duration-e);let o=t?0:this.delay,s=Math.min(Math.max(e,0),this.duration);return this._progress=Math.min(Math.max(e/this.duration,0),1),this._passed=s,r||this.callback(this.config.onSeek,[s,this._progress]),!r&&(!this._reversed&&s>=this.duration||this._reversed&&s<=0)?(this.process(this._reversed?0:1,this._reversed?0:1),this.stop(),this.resolve(),this.callback(this.config.onComplete),this.callListeners("onComplete"),this):this.seekDelay(e,t,r)?(this.lastProgress=(s-o)/(this.duration-o),this.process(this.config.easing?this.config.easing(this.lastProgress):this.lastProgress,this.lastProgress),this):(this.lastProgress!==0&&(this.lastProgress=0,this.process(0,0)),this)}reset(e=0,t=!1){let r=this._reversed?1-this._progress:this._progress;return this._resolved=!1,this.lastProgress=0,this.lastDelay=0,t||this.callback(this.config.onReset),(this._started||r>0)&&this.seek(e,!0,t),this.task&&this.stop(t),this}reverse(){return this._reversed=!this._reversed,this.stop(!0),this.seek(0),this}then(e){let t=this,r=t.then;if(t.then=void 0,this._resolved){e(this);let o=Promise.resolve(this);return t.then=r,o}return new Promise(o=>{this.resolveFn=()=>{o(this),e(this),t.then=r}})}process(e,t){return this}}});function Js(i){let e=so.get(i);if(e)return e;let r=getComputedStyle(i).transform,o={x:0,y:0,z:0,opacity:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,scale:1,scaleX:1,scaleY:1,scaleZ:1};if(r&&r!=="none"){let s=r.includes("3d")?"3d":"2d",n=r.match(/matrix.*\((.+)\)/);if(!n)return o;let a=n[1].split(", ").map(Number);if(s==="2d"){let[l,c,u,d,p,g]=a;o.x=p,o.y=g,o.scaleX=Math.sqrt(l*l+c*c),o.scaleY=Math.sqrt(u*u+d*d),o.rotateZ=Math.atan2(c,l)*(180/Math.PI)}else if(s==="3d"){let[l,c,u,d,p,g,v,w,C,j,se,ne,Z,be,$,ki]=a;o.x=Z,o.y=be,o.z=$,o.scaleX=Math.sqrt(l*l+c*c+u*u),o.scaleY=Math.sqrt(p*p+g*g+v*v),o.scaleZ=Math.sqrt(C*C+j*j+se*se),o.rotateY=Math.asin(-u),Math.cos(o.rotateY)!==0?(o.rotateX=Math.atan2(v,se),o.rotateZ=Math.atan2(c,l)):(o.rotateX=0,o.rotateZ=Math.atan2(-p,g)),o.rotateX*=180/Math.PI,o.rotateY*=180/Math.PI,o.rotateZ*=180/Math.PI}}return o.scale=o.scaleX,o.rotate=o.rotateZ,so.set(i,o),o}function en(i,e,t={}){let r="",o={...e},s=Ui(i);if(o.rotateZ=o.rotateZ!==void 0?o.rotateZ:o.rotate!==void 0?o.rotate:0,o.scaleX=o.scaleX!==void 0?o.scaleX:o.scale!==void 0?o.scale:1,o.scaleY=o.scaleY!==void 0?o.scaleY:o.scale!==void 0?o.scale:1,o.scaleZ=o.scaleZ!==void 0?o.scaleZ:o.scale!==void 0?o.scale:1,o.x!==void 0||o.y!==void 0||o.z!==void 0){let n=o.x!==void 0?o.x:s.x,a=o.y!==void 0?o.y:s.y,l=o.z!==void 0?o.z:s.z,c=t.x||"px",u=t.y||"px",d=t.z||"px";(n!==0||a!==0||l!==0)&&(s.x=n,s.y=a,s.z=l,r+=` translate3d(${n}${c}, ${a}${u}, ${l}${d})`)}if(o.rotateX!==void 0&&o.rotateX!==0){let n=t.rotateX||t.rotate||"deg";s.rotateX=o.rotateX,r+=` rotateX(${o.rotateX}${n})`}if(o.rotateY!==void 0&&o.rotateY!==0){let n=t.rotateY||t.rotate||"deg";s.rotateY=o.rotateY,r+=` rotateY(${o.rotateY}${n})`}if(o.rotateZ!==void 0&&o.rotateZ!==0){let n=t.rotateZ||t.rotate||"deg";s.rotateZ=o.rotateZ,r+=` rotateZ(${o.rotateZ}${n})`}if(o.scaleX!==void 0||o.scaleY!==void 0||o.scaleZ!==void 0){let n=o.scaleX!==void 0?o.scaleX:s.scaleX,a=o.scaleY!==void 0?o.scaleY:s.scaleY,l=o.scaleZ!==void 0?o.scaleZ:s.scaleZ;(n!==1||a!==1||l!==1)&&(s.scaleX=n,s.scaleY=a,s.scaleZ=l,r+=` scale3d(${n}, ${a}, ${l})`)}i.style.transform=r.trim()}function Ni(i,e){let t={...i,...e};return typeof e.scale<"u"&&(t.scaleX=e.scale,t.scaleY=e.scale,t.scaleZ=e.scale),typeof e.rotate<"u"&&(t.rotateZ=e.rotate),t}function Ui(i){let e=Js(i),t=parseFloat(i.style.opacity);return e.opacity=isNaN(t)?1:t,e}function oi(i,e,t={}){en(i,e,t),typeof e.opacity<"u"&&(e.opacity===1?i.style.opacity="":i.style.opacity=e.opacity.toString());for(let r in e)tn.includes(r)||Object.prototype.hasOwnProperty.call(e,r)&&(i.style[r]=e[r])}var so,tn,Wi=h(()=>{"use strict";so=new WeakMap;tn=["opacity","x","y","z","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ"]});function Xi(i,e,t){if(i instanceof HTMLElement)oi(i,e,t);else for(let r in e)i[r]=e[r]}function no(i,e,t){return new de({duration:.001,onStart:()=>Xi(i,e,t)})}var ao=h(()=>{"use strict";yt();Wi()});function lo(i,e){let t={};for(let r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&Object.prototype.hasOwnProperty.call(e,r)){let o=e[r]-i[r];o!==0&&(t[r]=o)}return t}var co,lt,$i=h(()=>{"use strict";yt();Wi();co=class extends de{constructor(i){super(i),this.config=i,this.registry=co.registry,this.originState={},this.changedState={},this.resultState={},this.update(),i.reversed&&this.reverse(),i.initSeek&&this.seek(0,!0,!0),i.autoStart!==!1&&this.start()}get key(){return this.config.key||this.config.target||this.config.from}updateRegistry(){let i=this.registry.get(this.key);this.config.overwrite!==!1&&i&&this.overwrite(this.key),this.registry.set(this.key,this)}beforeStop(){this.registry.delete(this.key)}beforeSeek(){this.updateRegistry(),this.config.seekUpdate!==!1&&this.update()}overwrite(i){let e=this.registry.get(i);e&&(!this._overridden&&e.ticking&&e.stop(),this.registry.delete(i),this.callback(this.config.onOverwrite,[e]))}update(){let i=this.config,e=i.from;if(i.target&&i.target instanceof HTMLElement?this.domTarget=i.target:e instanceof HTMLElement&&(this.domTarget=e),this.domTarget){let t=Ui(this.domTarget),r=e instanceof HTMLElement?{...t}:Ni(t,e),o=Ni(t,i.to),s=lo(r,o);this.originState=r,this.changedState=s,this.resultState={...this.originState};for(let n in this.resultState)Object.hasOwnProperty.call(o,n)||delete this.resultState[n]}else{let t=e,r=i.to;this.originState={...t},this.changedState=lo(this.originState,r),i.target&&!(i.target instanceof HTMLElement)?this.resultState=i.target:this.resultState=i.mutate!==!1?t:{...this.originState}}return this}process(i,e){let t=!1;for(let r in this.changedState)if(this.changedState[r]!==void 0){let o=this.changedState[r],s=this.originState[r];s!==void 0&&(this.resultState[r]=s+o*i,t=!0)}return this.domTarget&&t&&oi(this.domTarget,this.resultState,this.config.units),this.callback(this.config.onUpdate,[this.resultState,{target:this,linear:e,eased:i}]),this}},lt=co;lt.registry=new WeakMap});function bt(i,e,t={}){return new lt({from:i,to:e,...t})}function xt(i,e,t,r={}){return new lt({target:i,from:e,to:t,...r})}function ho(){throw new Error("Not implemented yet")}function uo(){return new de({duration:.001}).start()}function mo(i=100,e={}){return new de({duration:i,...e}).start()}var si=h(()=>{"use strict";yt();$i()});var Ee,Gi=h(()=>{"use strict";yt();si();Ee=class i extends de{constructor(e){if(super(e),this.config=e,this.items=[],this.sideEffects=[],this.timelineReversed=!1,this._duration=0,e.reversed&&this.reverse(),e.items)for(let t of e.items)t.controller?this.add(t.controller,t.config):t.dynamic&&this.add(t.dynamic,t.config);e.autoStart!==!1&&requestAnimationFrame(()=>this.start())}call(e,t={}){return this.sideEffects.push({callback:e,config:t,called:!1,item:this.items[this.items.length-1]}),this}clear(){return this.reset(),this.items.length=0,this.sideEffects.length=0,this._duration=0,this}add(e,t={}){if(typeof e=="function")return this.items.push({dynamic:e,config:t}),this;let r=Array.isArray(e)?e:[e];for(let o=0,s=r.length;o<s;o++){let n=r[o].override().pause().reset(),a={...t};this.timelineReversed&&!n.reversed&&n.reverse(),o>0&&(a.offset=-1),typeof a.offset<"u"&&(a.offset=Math.min(Math.max(a.offset,-1),1)),this.items.push({controller:n,config:a})}return this.updateDuration(),this}to(e,t,r){return this.add(bt(e,t,r),r)}fromTo(e,t,r,o){return this.add(xt(e,t,r,o),o)}remove(e){let t=this.items.findIndex(r=>r.controller===e);return t!==-1&&(this.items.splice(t,1),this.updateDuration()),this}updateDuration(){let e=[];for(let t=0;t<this.items.length;t++){let r=this.items[t],o=r.controller;if(!o)continue;let s=r.config,n=o.duration,a=s.offset||0;if(t===0){e.push([n,n]);continue}if(e.length===0)continue;let[l,c]=e[e.length-1],u=c*a;e.push([l+u+n,n])}this._duration=Math.max(...e.map(t=>t[0]))}revealAllItems(){for(let e of this.items)this.revealItem(e);return this.updateDuration(),this}revealItem(e){return!e.controller&&e.dynamic&&(e.controller=e.dynamic().override().reset(),e.controller instanceof i&&e.controller.revealAllItems(),this.updateDuration()),e}isDynamic(){return this.items.some(e=>e.dynamic)}getStartMs(e,t,r=!1){let o=0;for(let s=0;s<=t;s++){if(s-1<0)continue;let a=this.revealItem(e[s-1]).controller,l=e[s].config.offset||0,c=a.duration-(r?a.delay:0);o+=c+c*l}return o}callEffects(e,t){for(let r of t){let o=r.config.offset||0,s=r.item?.controller,n=r.item&&s?.duration||0,a=n+n*o;!r.called&&e>=a&&(r.callback(),r.called=!0)}}seek(e,t=!1,r=!1,o=!1){if(!this.preSeek(e,r))return this;if(this._passed=Math.min(e,this.duration),this._progress=this._passed/this.duration,r||this.callback(this.config.onSeek,[e,this._progress]),!this.seekDelay(e,t,r))return this;e-=t?0:this.delay;let s=this.items;for(let n=0,a=s.length;n<a;n++){let l=this.revealItem(s[n]),c=this.sideEffects.filter(j=>j.item===l),u=this.getStartMs(s,n,t),d=t?l.controller.delay:0,p=l.controller.duration-d,g=u+p,v=e-u;if(p===0)continue;if(e>g){l.controller.progress<1&&(l.controller instanceof i?l.controller.seek(p,t,r,o):l.controller.seek(p,t,r),this.callEffects(p,c));continue}l.controller instanceof i?l.controller.seek(v,t,r,o):l.controller.seek(v,t,r),this.callEffects(v,c);let w=s[n+1],C=w&&w.config.offset||0;if(!o&&(!w||g+C*p>e))break}return this._progress=this._passed/this.duration,this._progress>=1&&!r&&(this.stop(),this.resolve(),this.callback(this.config.onComplete),this.callListeners("onComplete")),this}beforeStart(){this.resetEffects();for(let e of this.sideEffects.filter(t=>!t.item))e.callback()}reverse(){this.timelineReversed=!this.timelineReversed;for(let{controller:e}of this.items)e&&e.reverse();return this}stop(e=!1){super.stop();for(let{controller:t}of this.items)t&&t.stop(e);return this}resetEffects(){for(let e of this.sideEffects)e.called=!1}reset(e=0,t=!1){super.reset(e,t);let r=this._reversed?1-this._progress:this._progress,o=this.items.slice().reverse();(this._started||r>0)&&this.seek(e,!0,t,!0);for(let{controller:s}of o)s&&s.reset(e,t);return this.resetEffects(),this}}});function fo(i={}){return new Ee(i)}function po(i,e,t){return new Ee({...t?.timeline,items:Array.from(i).map(r=>{let o={offset:typeof t?.stagger?.offset<"u"?-1+t.stagger.offset:-1};return{controller:bt(r,e,t),config:o}})})}function go(i,e,t,r){return new Ee({...r?.timeline,items:Array.from(i).map(o=>{let s={offset:typeof r?.stagger?.offset<"u"?-1+r.stagger.offset:-1};return{controller:xt(o,e,t,r),config:s}})})}var vo=h(()=>{"use strict";Gi();si()});var f,yo=h(()=>{"use strict";ao();vo();si();f={to:bt,fromTo:xt,timeline:fo,from:ho,set:no,setNow:Xi,staggerTo:po,noop:uo,delay:mo,staggerFromTo:go}});var V=h(()=>{"use strict";io();yo();$i();Gi();yt()});function Vt(i){return i=typeof i=="string"?Jt(i):i,{id:rn(i),url:`${i.pathname}${i.search}`,hash:i.hash,load:Wr(i)}}function bo(i,e){let t=document.createElement("div");t.innerHTML=i;let r=t.querySelector("title")?.innerText||"";return{outlet:t.querySelector(e)||void 0,title:r}}function xo(i,e){return i.url===e.url&&i.hash===e.hash}function rn(i){return window.btoa(`${i.host}${i.pathname}${i.search}${i.hash}`)}function Zi(i){return!i.startsWith("tel:")&&!i.startsWith("mailto:")&&!i.startsWith("javascript:")}var Ki=h(()=>{"use strict";O()});var ni,Qi=h(()=>{"use strict";M();O();Ki();ni=class{constructor(e,t){this.selector=e,this.callback=t,this.listeners=new Map,this.update()}update(e=document.documentElement){for(let[t]of this.listeners)document.documentElement.contains(t)||this.remove(t);Ne(this.selector,e).forEach(t=>{this.listeners.has(t)||this.add(t)})}add(e){this.listeners.set(e,E(S(e,"click",t=>{t.preventDefault();let r=t.currentTarget;if(r&&this.callback){let o=r.getAttribute("href")||r.dataset.routeUrl;o&&Zi(o)&&this.callback(o,r,"click")}}),S(e,"mouseenter",t=>{let r=t.currentTarget;if(r&&this.callback){let o=r.getAttribute("href")||r.dataset.routeUrl;o&&Zi(o)&&this.callback(o,r,"hover")}})))}remove(e){let t=this.listeners.get(e);t&&(t(),this.listeners.delete(e))}clear(){for(let e of this.listeners.values())e();this.listeners.clear()}}});var R,ai,wo=h(()=>{"use strict";le();M();V();O();Qi();Ki();R=(i=>(i.TRIGGER_CLICK="triggerclick",i.NAV_START="navstart",i.NAV_END="navend",i.NAV_CANCEL="navcancel",i.NAV_SETTLED="navsettled",i.NAV_PROGRESS="navprogress",i.BEFORE_ENTER="beforeenter",i.AFTER_ENTER="afterenter",i.BEFORE_LEAVE="beforeleave",i.AFTER_LEAVE="afterleave",i.AFTER_RELEASE="afterrelease",i))(R||{}),ai=class extends F{constructor(e={}){super(),this.config=e,this.animations=[],this.keepViews=[],this.changeStates=[],this.viewCache=new Map,this.outletSelector=e.outlet||"main",this.viewSelector=e.view||".router-view",this.triggerSelector=e.trigger||"a[href]:not([data-no-route])",this.baseUrl=Jt(window.location.href),this._route=Vt(this.baseUrl),this._outlet=ee(this.outletSelector),this._view=this.queryView(this._outlet),this.unlisten=this.listen(),this.trigger=new ni(this.triggerSelector,(t,r,o)=>{o==="click"?(this.emit("triggerclick",{url:t,target:r}),this.to(t)):o==="hover"&&e.hoverPreload!==!1&&this.preload(t)}),this.viewCache.set(this._route.id,Promise.resolve({title:document.title,outlet:this._outlet,view:this._view})),window.history.replaceState(this._route,"",this._route.url+(this._route.hash||""))}get route(){return{...this._route}}get outlet(){return this._outlet}get view(){return this._view}listen(){return E(S(window,"popstate",e=>{this.navigate(e.state,{trigger:"popstate"})}))}update(e){this.trigger.update(e)}animate(...e){e.forEach(t=>this.animations.push(t))}removeAnimation(e){return this.animations.splice(this.animations.findIndex(t=>t.name===e),1)[0]}to(e,t){let r=Vt(e),o=t?.replace?"replaceState":"pushState";window.history[o](r,"",r.url+(r.hash||"")),this.navigate(r,{flags:t?.flags})}animateCycle(e,t,r){e.call(()=>this.emit("beforeenter",r)),this.animateHook(r,"append",e,t),e.call(()=>this._outlet.append(r.toElement)),this.animateHook(r,"enter",e,t),e.call(()=>{this.emit("afterenter",r),this.emit("beforeleave",r)}),this.animateHook(r,"leave",e,t),e.call(()=>{this.detachView(r.fromElement),this.emit("afterleave",r)})}animateHook(e,t,r,o){let s=[];for(let n of o){let a=n[t];a instanceof Function&&s.push({dynamic:()=>a(e)||f.noop(),config:{offset:-1}})}s.length>0&&r.add(()=>f.timeline({items:s}))}async preload(e){return typeof e=="string"&&(e=Vt(e)),!!await this.findView(e)}async render(e,t){typeof e=="string"&&(e=Vt(e));let{view:r}=await this.findView(e);if(r){if(t?.keep!==!1&&this.keepViews.push(r),this.route.id!==e.id)for(let[o,s]of Object.entries(t?.style||{}))r.style[o]=s;return this._outlet.append(r),!0}return!1}async navigate(e,t){if(!e)return;let r=t?.trigger||"user",o={outlet:this._outlet,fromElement:this.view,fromRoute:this._route,toRoute:e,trigger:r,flags:t?.flags||{}};if(xo(this._route,e))return 16;let s=o.fromElement,n=this._outlet.contains(s),a={...o,fromInDom:n},l=this.animations.filter(g=>g.when?g.when(o):!0),c=f.timeline({autoStart:!1,onComplete:()=>{this.emit("navsettled",o),this.changeStates=[]},onSeek:g=>{this.emit("navprogress",g)},onStop:g=>{if(a.fromElement&&!this.changeStates.some(w=>w.fromElement===a.fromElement||w.toElement===a.fromElement)){for(let w of l)w.release&&w.release(a.fromElement);this.emit("afterrelease",o)}requestAnimationFrame(()=>{if(!c.complete&&g){this.emit("navcancel",o);for(let v of l)v.cancel&&v.cancel(o)}})}});a.timeline=c,this._route=e,this.emit("navstart",o),this.animateHook(o,"start",c,l);let{view:u,title:d}=await this.findView(e);document.title=d;for(let g of this.changeStates)g.timeline?.stop();if(this.changeStates.push(a),!u)return 8;let p={toElement:u,fromInDom:n,...o};a.fromElement=s,a.toElement=u,this._view=u,this.animateCycle(c,l,p),this.trigger.update(u);for(let g of l)g.complete&&c.call(()=>g.complete?.(p));return c.call(()=>this.emit("navend",o)),c.start(),this.clearChangeStates([s,u]),1}detachView(e){e&&(this.keepViews.includes(e)?e.style.display="none":e.remove())}clearChangeStates(e){for(let t of this.changeStates)e.includes(t.fromElement)||this.detachView(t.fromElement),e.includes(t.toElement)||this.detachView(t.toElement)}queryView(e){return ee(this.viewSelector,e)}async findView(e){if(this.viewCache.has(e.id)&&this.config.cache!==!1)return await this.viewCache.get(e.id);let t=this.load(e);return this.viewCache.set(e.id,t),await t}async load(e){this.abortController&&(this.abortController.abort(),this.abortController=new AbortController);let t=this.abortController?.signal,r=await fetch(e.load,{signal:t}),o=bo(await r.text(),this.outletSelector);return{...o,view:o.outlet?this.queryView(o.outlet):void 0}}destroy(){this.trigger.clear(),this.unlisten()}}});var Eo=h(()=>{"use strict"});var So,Ji=h(()=>{"use strict";V();So=(i={})=>({name:i.name||"smoovy:fade",when:i.when,release:e=>{e.style.opacity="",e.style.display=""},append:({toElement:e})=>{e.style.display="none",e.style.opacity===""&&(e.style.opacity="0")},enter:({fromElement:e,fromInDom:t})=>{if(t&&e.style.display!=="none")return f.to(e,{opacity:0},{duration:i.duration||500,easing:i.easing})},leave:({toElement:e,fromElement:t})=>(e.style.display="",t.style.display="none",f.to(e,{opacity:1},{duration:i.duration||500,easing:i.easing}))})});var ge=h(()=>{"use strict";wo();Eo();Qi();Ji()});function Fe(i,e,t,r){var o=arguments.length,s=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(n=i[a])&&(s=(o<3?n(s):o>3?n(e,t,s):n(e,t))||s);return o>3&&s&&Object.defineProperty(e,t,s),s}function je(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function _e(i,e,t,r){function o(s){return s instanceof t?s:new t(function(n){n(s)})}return new(t||(t=Promise))(function(s,n){function a(u){try{c(r.next(u))}catch(d){n(d)}}function l(u){try{c(r.throw(u))}catch(d){n(d)}}function c(u){u.done?s(u.value):o(u.value).then(a,l)}c((r=r.apply(i,e||[])).next())})}var wt=h(()=>{});var _,re=h(()=>{wt();z();ge();_=class i extends W{get name(){return"router"}get child(){return i}init(){return _e(this,void 0,void 0,function*(){window.history.scrollRestoration=this.config.scrollRestoration||"manual";let e=new ai(this.config.routerConfig);e.animate(...this.config.animations||[]),e.on(R.AFTER_ENTER,({toElement:t})=>{this.composer.update(t)}),this.resolve(e)})}};Fe([I(),je("design:type",vt)],_.prototype,"composer",void 0)});function k(i,e){return new Bt({target:i,...e||{}})}function Oe(i){i.destroy()}var oe,Bt,To=h(()=>{"use strict";le();M();oe=class extends F{constructor(i){super(),this.config=i,this.lastResize=0,this.visibilityTimer=-1,this._left=0,this._top=0,this._width=0,this._height=0,this._scrollWidth=0,this._scrollHeight=0,this._visible=!1,this._interecKey="{}",i.autoAttach!==!1&&this.attach()}static handleEntries(i,e,t){i.forEach(r=>{let o=oe.items.get(r.target);if(o){t&&(o=o.filter(s=>s.intersecKey===t));for(let s=0,n=o.length;s<n;s++)e(o[s],r)}})}get resizeDebounce(){return this.config.resizeDebounce||0}get resizeDetection(){return this.config.resizeDetection}get visibilityDelay(){return this.config.visibilityDelay||0}get visibilityThreshold(){return typeof this.config.visibilityDetection=="object"&&this.config.visibilityDetection.threshold||0}get ref(){return this.config.target}get visible(){return this._visible}set visible(i){i!==this._visible&&(clearTimeout(this.visibilityTimer),this.visibilityDelay>0?this.visibilityTimer=setTimeout(()=>this.emitVisibility(i),this.visibilityDelay):this.emitVisibility(i))}get left(){return this._left}get top(){return this._top}get x(){return this._left}get y(){return this._top}get width(){return this._width}get height(){return this._height}get scrollWidth(){return this._scrollWidth}get scrollHeight(){return this._scrollHeight}get scrollSize(){return{width:this.scrollWidth,height:this.scrollHeight}}get size(){return{width:this.width,height:this.height}}get pos(){return{left:this.left,top:this.top}}get coord(){return{x:this.left,y:this.top}}get intersecKey(){return this._interecKey}attach(){let i=this.config;if(!(i.target instanceof HTMLElement)&&!(i.target instanceof Window))throw new Error("target type is not valid: "+typeof i.target);if(oe.items.has(i.target)?oe.items.get(i.target)?.push(this):oe.items.set(i.target,[this]),i.visibilityDetection&&i.target instanceof HTMLElement){let t=oe.intersecObservers,r=this.getIntersectionObserverConfig();this._interecKey=this.getIdFromConfig(r),t.has(this._interecKey)||t.set(this._interecKey,new IntersectionObserver(o=>{oe.handleEntries(o,(s,n)=>{s.visible=n.isIntersecting},this._interecKey)},r)),this.intersecObserver=t.get(this._interecKey),this.intersecObserver?.observe(i.target)}i.resizeDetection&&(oe.resizeObserver||(oe.resizeObserver=new ResizeObserver(t=>{oe.handleEntries(t,r=>r.update())}),window&&window.addEventListener("resize",()=>{oe.items.forEach(t=>{for(let r=0,o=t.length;r<o;r++){let s=t[r];if(s?.resizeDetection){let n=typeof this.config.resizePeriods!==void 0?[250,500]:this.config.resizePeriods;requestAnimationFrame(()=>s.update()),Array.isArray(n)&&n.forEach(a=>{setTimeout(()=>s.update(),a)})}}})})),i.target instanceof HTMLElement&&oe.resizeObserver.observe(i.target,{...typeof i.resizeDetection=="object"?i.resizeDetection:{}}));let e=i.initUpdatePeriods!==void 0?i.initUpdatePeriods:[50,250,500,1e3];this.update(),requestAnimationFrame(()=>this.update()),e.forEach(t=>setTimeout(()=>this.update(),t))}onDimChange(i){return this.on("dimensionschange",i)}onVisChange(i){return this.on("visibilitychange",i)}onChange(i){return E(this.onDimChange(i),this.onVisChange(i))}update(){let i=window.performance.now(),e;i-this.lastResize<=this.resizeDebounce||(this.lastResize=i,this.ref instanceof Window?e={left:0,top:0,width:window.innerWidth,height:window.innerHeight}:this.config.useBounds!==!1?e=this.getElementOffset(this.ref):e=this.ref.getBoundingClientRect(),(e.left!==this._left||e.top!==this._top||e.width!==this._width||e.height!==this._height)&&(this._left=e.left,this._top=e.top,this._width=e.width,this._height=e.height,this.ref instanceof Element&&(this._scrollHeight=this.ref.scrollHeight,this._scrollWidth=this.ref.scrollWidth),this.emit("dimensionschange",this)))}destroy(){let i=oe.items.get(this.ref);if(i){let e=i.indexOf(this);e>-1&&i.splice(e,1),this.ref instanceof HTMLElement&&(this.intersecObserver?.unobserve(this.ref),oe.resizeObserver?.unobserve(this.ref)),i.length===0&&oe.items.delete(this.ref)}}emitVisibility(i){this._visible=i,i&&this.intersecObserver&&this.config.detectVisibilityOnce&&this.intersecObserver.unobserve(this.ref),this.emit("visibilitychange",this)}getIntersectionObserverConfig(){return{...typeof this.config.visibilityDetection=="object"?this.config.visibilityDetection:{}}}getIdFromConfig(i){return JSON.stringify(i)}getElementOffset(i){let e=0,t=0,r=i;do e+=r.offsetLeft||0,t+=r.offsetTop||0,r=r.offsetParent;while(r);return{left:e,top:t,width:i.offsetWidth,height:i.offsetHeight}}},Bt=oe;Bt.items=new Map;Bt.intersecObservers=new Map});var ae=h(()=>{"use strict";To()});var ve,Et=h(()=>{wt();z();ae();ve=class i extends W{get name(){return"viewport"}get child(){return i}init(){return _e(this,void 0,void 0,function*(){let e=k(window,{resizeDetection:!0});e.update(),this.resolve(e)})}}});var er,He,tr=h(()=>{wt();z();ge();re();er=class{constructor(){this.scope=window}enable(){let e=document.body.dataset.gtagId;if(e){let t=`https://www.googletagmanager.com/gtag/js?id=${e}`,r=document.createElement("script"),o=document.createElement("script");r.type=o.type="text/javascript",r.async=!0,r.src=t,o.innerHTML=`
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '${e}', { 'anonymize_ip': true });
      `,document.head.append(r,o)}}track(...e){this.scope.dataLayer||(this.scope.dataLayer=[]),this.scope.dataLayer.push(e)}},He=class i extends W{get name(){return"tracker"}get child(){return i}init(){return _e(this,void 0,void 0,function*(){let e=new er;if(this.router.activated){let t=yield this.router;e.track("event","page_view",{page_path:t.route.url}),t.on(R.NAV_START,r=>{e.track("event","page_view",{page_path:r.toRoute.url})})}this.resolve(e)})}};Fe([x(_),je("design:type",_)],He.prototype,"router",void 0)});var St,Tt,li,Ct=h(()=>{"use strict";St=class{constructor(e=2,t=1){this.size=e,this.type=t,this.data=new Float32Array}get len(){return this.data.length}get count(){return this.len}update(e=this.data){if(!this.gl||!this.buffer){console.warn("Can't update buffer without context");return}e instanceof Float32Array?this.data=e:this.data=new Float32Array(e),this.bind(),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.data,this.gl.STATIC_DRAW)}bind(){this.gl&&this.buffer&&this.gl.bindBuffer(this.type===1?this.gl.ARRAY_BUFFER:this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)}create(e){if(this.gl=e,this.buffer)throw new Error("Buffer already attached");this.buffer=e.createBuffer()}destroy(e){e&&this.buffer&&(e.deleteBuffer(this.buffer),this.buffer=void 0)}},Tt=class extends St{constructor(){super(2,1)}get count(){return 0}},li=class extends St{constructor(e=3){super(e,1),this.size=e}get count(){return this.len/this.size}}});var b,Xe,_t=h(()=>{"use strict";b=(i=>(i[i.MAT2=1]="MAT2",i[i.MAT3=2]="MAT3",i[i.MAT4=4]="MAT4",i[i.VEC2=8]="VEC2",i[i.VEC3=16]="VEC3",i[i.VEC4=32]="VEC4",i[i.FLOAT=64]="FLOAT",i[i.INT=128]="INT",i))(b||{}),Xe=class{constructor(e,t,r){this.gl=e,this.vertex=t,this.fragment=r,this.attribLocations=new Map,this.uniformLocations=new Map,this.uniformValueCache=new Map,this.buffers=new Set,this.program=this.gl.createProgram()}create(){if(!this.program)throw new Error("Couldn't initialize Program");let e=this.gl;if(this.vertexShader=this.createShader(e.VERTEX_SHADER,this.vertex),this.fragmentShader=this.createShader(e.FRAGMENT_SHADER,this.fragment),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){let t=e.getProgramInfoLog(this.program);throw new Error(`Error while creating shader program: ${t}`)}}registerAttrib(e){if(!this.program)throw new Error("Program not initialized yet");let t=this.gl.getAttribLocation(this.program,e);return this.attribLocations.set(e,t),t}updateAttrib(e,t){let r=this.attribLocations.get(e),o=this.gl;return r||(r=this.registerAttrib(e)),t.bind(),o.vertexAttribPointer(r,t.size,o.FLOAT,!1,0,0),o.enableVertexAttribArray(r),t.count}registerUniform(e){if(!this.program)throw new Error("Program not initialized yet");let t=this.gl.getUniformLocation(this.program,e);if(t)return this.uniformLocations.set(e,t),t}updateUniform(e,t){let r=t.value,o=!(192&t.type),s=this.uniformLocations.get(e),n=o?this.uniformValueCache.get(e):null;if(s||(s=this.registerUniform(e)),!n&&o){let a=0;typeof r=="object"&&!(r instanceof Array)?a=Object.keys(r).length:typeof r.length<"u"&&(a=r.length);let l=[];for(let c=0;c<a;c++)l.push(0);n=new Float32Array(l),this.uniformValueCache.set(e,n)}if(n&&typeof r=="object"&&!(r instanceof Array)&&(typeof r.x=="number"&&(n[0]=r.x),typeof r.y=="number"&&(n[1]=r.y),typeof r.z=="number"&&(n[2]=r.z),typeof r.w=="number"&&(n[3]=r.w)),n&&typeof r.length<"u")for(let a=0,l=r.length;a<l;a++)n[a]=r[a];if(o&&(r=n),7&t.type){let a=`uniformMatrix${b[t.type].slice(-1)}fv`;this.gl[a](s,!1,r)}else if(56&t.type){let a=b[t.type].slice(-1),l=128&t.type?"i":"f",c=`uniform${a}${l}v`;this.gl[c](s,r)}else if(192&t.type){let l=`uniform1${128&t.type?"i":"f"}`;this.gl[l](s,r)}}destroy(e){this.program&&e.deleteProgram(this.program),this.vertexShader&&e.deleteShader(this.vertexShader),this.fragmentShader&&e.deleteShader(this.fragmentShader),this.attribLocations.forEach(t=>{e.disableVertexAttribArray(t)}),this.attribLocations.clear()}use(){if(!this.program)throw new Error("Program not ready yet");this.gl.useProgram(this.program)}createShader(e,t){let r=this.gl.createShader(e);if(!r)throw new Error("Failed to create shader");if(this.gl.shaderSource(r,t),this.gl.compileShader(r),!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)){let o=this.gl.getShaderInfoLog(r);throw this.gl.deleteShader(r),new Error(`Shader compile failed: ${o}`)}return r}}});function sn(){let i=new Blob([`self.onmessage = ({ data: { key, size, amount, posX, posY } }) => {
      const sX = size.width / amount.x;
      const sY = size.height / amount.y;
      const vertices = new Float32Array(12 * amount.x * amount.y);
      let index = 0;

      for (let iY = 0; iY < amount.y; iY++) {
        const y = posY + sY * iY;

        for (let iX = 0; iX < amount.x; iX++) {
          const x = posX + sX * iX;

          vertices.set([
            x,       y + sY,
            x,       y,
            x + sX,  y + sY,
            x + sX,  y,
            x + sX,  y + sY,
            x,       y,
          ], index);

          index += 12;
        }
      }

      self.postMessage({ key, vertices });
    }`.replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g," ").trim()],{type:"application/javascript"});return new Worker(URL.createObjectURL(i))}async function Ot(i,e,t=0,r=0){return new Promise(o=>{if(window.Worker){Yt=Yt||sn();let s=performance.now()+Math.random(),n=a=>{a.data.key===s&&(o(a.data.vertices),Yt?.removeEventListener("message",n))};Yt.addEventListener("message",n),Yt.postMessage({key:s,amount:i,size:e,posX:t,posY:r})}else{let s=e.width/i.x,n=e.height/i.y,a=new Float32Array(12*i.x*i.y),l=0;for(let c=0;c<i.y;c++){let u=r+n*c;for(let d=0;d<i.x;d++){let p=t+s*d;a.set([p,u+n,p,u,p+s,u+n,p+s,u,p+s,u+n,p,u],l),l+=12}}o(a)}})}var Yt,ci=h(()=>{"use strict";Yt=null});function hi(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Co(i){return i[0]=i[5]=i[10]=i[15]=1,i[1]=i[2]=i[3]=0,i[4]=i[6]=i[7]=0,i[8]=i[9]=i[11]=0,i[12]=i[13]=i[14]=0,i}function _o(i,e){return typeof e[0]<"u"&&(i[12]=e[0]),typeof e[1]<"u"&&(i[13]=e[1]),typeof e[2]<"u"&&(i[15]=e[2]),i}function ir(i,e){let t=e[0]||0,r=e[1]||0,o=e[2]||0;return i[12]=i[0]*t+i[4]*r+i[8]*o+i[12],i[13]=i[1]*t+i[5]*r+i[9]*o+i[13],i[14]=i[2]*t+i[6]*r+i[10]*o+i[14],i[15]=i[3]*t+i[7]*r+i[11]*o+i[15],i}function Oo(i){return[Math.hypot(i[0],i[1],i[2]),Math.hypot(i[4],i[5],i[6]),Math.hypot(i[8],i[9],i[10])]}function Ao(i,e){let t=e[0],r=e[1],o=e[2];return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=r,i[5]*=r,i[6]*=r,i[7]*=r,i[8]*=o,i[9]*=o,i[10]*=o,i[11]*=o,i}function Lo(i,e,t,r,o){let s=1/Math.tan(e/2);if(i[0]=s/t,i[5]=s,i[11]=-1,i[1]=i[2]=i[3]=i[4]=i[6]=0,i[7]=i[8]=i[9]=i[15]=0,o!==void 0&&o!==1/0){let n=1/(r-o);i[10]=(o+r)*n,i[14]=2*o*r*n}else i[10]=-1,i[14]=-2*r;return i}var ui=h(()=>{"use strict"});var ct,mi,rr=h(()=>{"use strict";le();O();Ct();_t();ui();ct=(i=>(i.BEFORE_RECALC="beforerecalc",i.BEFORE_DRAW="beforedraw",i.AFTER_DRAW="afterdraw",i))(ct||{}),mi=class extends F{constructor(e,t={}){super(),this.viewport=e,this.config=t,this.animating=!1,this.disabled=!1,this.created=new pe,this._buffers={},this._uniforms={},this.model=hi(),this._uniforms.time={type:b.FLOAT,value:0},this._uniforms.modelViewMatrix={type:b.MAT4,value:this.model},t.uniforms&&(this._uniforms=Object.assign(this._uniforms,t.uniforms))}render(e=0){if(!this.disabled&&this.animating){let t=0;this.program.use();for(let s in this._buffers)if(Object.prototype.hasOwnProperty.call(this._buffers,s)){let n=this._buffers[s];n instanceof St&&(t+=this.program.updateAttrib(s,n))}for(let s in this._uniforms)if(Object.prototype.hasOwnProperty.call(this._uniforms,s)){let n=this._uniforms[s];s==="time"&&(n.value=e/1e3),this.program.updateUniform(s,n)}let r=typeof this.config.drawMode<"u"?this.config.drawMode:4;this.beforeDraw(),this.emit("beforedraw"),this.viewport.gl.drawArrays(r,0,t),this.afterDraw(),this.emit("afterdraw")}}async recalc(){this.emit("beforerecalc");for(let e in this._buffers)Object.prototype.hasOwnProperty.call(this._buffers,e)&&this._buffers[e].update()}get uniforms(){return this._uniforms}get buffers(){return this._buffers}isInsideContainer(e){return this.config.container===e}updateProjection(){let e=this.config.container?this.viewport.getContainerProjection(this.config.container):this.viewport.projection;this._uniforms.projectionMatrix={type:b.MAT4,value:e||this.viewport.projection}}create(){this.updateProjection(),this.program.create();for(let e in this._buffers)Object.prototype.hasOwnProperty.call(this._buffers,e)&&this._buffers[e].create(this.viewport.gl);return this.recalc(),this.onCreate(),this.created.resolve(),this.animating=!0,this}destroy(e){this.animating=!1,delete this._uniforms.projectionMatrix,this.program.destroy(e.gl);for(let t in this._buffers)Object.prototype.hasOwnProperty.call(this._buffers,t)&&this._buffers[t].destroy(e.gl);this.onDestroy()}uniform(e,t){if(typeof e=="object"){for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&this.uniform(o,e[o]);return this}let r=b.FLOAT;if(t instanceof Array)switch(t.length){case 2:r=b.VEC2;break;case 3:r=b.VEC3;break;case 4:r=b.VEC4;break}return this._uniforms[e]={type:r,value:t},this}beforeDraw(){}afterDraw(){}onCreate(){}onDestroy(){}}});var $e,qt=h(()=>{"use strict";M();ae();O();Ct();rr();_t();ui();ci();$e=class extends mi{constructor(e,t){super(e,t),this.viewport=e,this.config=t,this.buffers.vertCoord=new li(2),this.program=new Xe(e.gl,t.vertex||`
        attribute vec4 vertCoord;

        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;

        void main() {
          gl_Position = projectionMatrix * modelViewMatrix * vertCoord;
        }
      `,t.fragment||`
        precision highp float;
        uniform vec3 color;

        void main() {
          gl_FragColor = vec4(
            color.r / 255.0,
            color.g / 255.0,
            color.b / 255.0,
            1.0
          );
        }
      `)}onCreate(){super.onCreate(),this.config.element&&(this.observable=k(this.config.element,{resizeDetection:!0,visibilityDetection:!0}),this.unlistenElement=E(this.observable.onVisChange(()=>{this.observable?.update()}),this.observable.onChange(e=>{this.setSize(e.size),this.translate(e.coord),this.checkVisibility()})),setTimeout(()=>this.checkVisibility()),setTimeout(()=>this.checkVisibility(),100))}visibilityChanged(e){}checkVisibility(){this.observable&&(this.config.elementCulling!==!1&&(this.disabled=!this.observable.visible),this.visibilityChanged(this.observable.visible))}onDestroy(){super.onDestroy(),this.unlistenElement&&(this.unlistenElement(),delete this.unlistenElement),this.observable&&Oe(this.observable)}setElement(e){this.config.element=e}setSize(e){let t=!1;typeof e.width=="number"&&(e.width!==this.config.width&&(t=!0),this.config.width=e.width),typeof e.height=="number"&&(e.height!==this.config.height&&(t=!0),this.config.height=e.height),t&&this.config.autoResize!==!1&&this.recalc()}get x(){return this.config.x||0}get y(){return this.config.y||0}get width(){return this.config.width||0}get height(){return this.config.height||0}get scaleOrigin(){return this.config.scaleOrigin||{x:0,y:0}}get translateOrigin(){return this.config.translateOrigin||{x:0,y:0}}get clipSize(){return this.viewport.getClipsSpaceSize(this.config.width||0,this.config.height||0)}get scaling(){let[e,t]=Oo(this.model);return{x:e,y:t}}get translation(){return{x:this.config.x,y:this.config.y}}get element(){return this.config.element}setScaleOrigin(e){this.config.scaleOrigin||(this.config.scaleOrigin={x:0,y:0}),H(e)?this.config.scaleOrigin.x=this.config.scaleOrigin.y=e:e&&(H(e.x)&&(this.scaleOrigin.x=e.x),H(e.y)&&(this.scaleOrigin.y=e.y)),this.scale(this.scaling)}setTranslateOrigin(e){this.config.translateOrigin||(this.config.translateOrigin={x:0,y:0}),H(e)?this.config.translateOrigin.x=this.config.translateOrigin.y=e:e&&(H(e.x)&&(this.translateOrigin.x=e.x),H(e.y)&&(this.translateOrigin.y=e.y)),this.translate(this.translation)}setOrigin(e){this.setTranslateOrigin(e),this.setScaleOrigin(e)}scale(e){let t=this.scaling,r=1,o=1;H(e)?(r=e/t.x,o=e/t.y):(H(e.x)&&(r=e.x/t.x),H(e.y)&&(o=e.y/t.y)),Ao(this.model,[r,o,1]),this.translate(this.translation)}translate(e){let t=this.viewport,r=this.scaling,o=0,s=0;H(e.x)&&(o=this.config.x=e.x),H(e.y)&&(s=this.config.y=e.y);let n=this.translateOrigin.x*this.width,a=this.translateOrigin.y*this.height,l=(this.width-this.width*r.x)*-this.scaleOrigin.x,c=(this.height-this.height*r.y)*-this.scaleOrigin.y;_o(this.model,[t.getClipSpaceX(o-n-l),t.getClipSpaceY(s-a-c)])}get segments(){return typeof this.config.segments=="number"?{x:this.config.segments,y:this.config.segments}:this.config.segments instanceof Object?this.config.segments:{x:2,y:2}}async recalc(){super.recalc();let e=this.clipSize,t=this.buffers.vertCoord,r=await Ot(this.segments,e,0,-e.height);this.observable?(this.setSize(this.observable.size),this.translate(this.observable.coord)):this.translate({x:this.config.x||0,y:this.config.y||0}),t.update(r)}}});var nn,Ve,ht,or=h(()=>{"use strict";M();O();Ct();_t();ci();qt();nn={width:1,height:1},Ve=class extends $e{constructor(i,e){super(i,e),this.viewport=i,this.config=e,this.textures=new Map,this.loadResolver=new pe,this.imageLoading=!1,this.buffers.texCoord=new Tt,this.program=new Xe(i.gl,e.vertex||`
        attribute vec4 vertCoord;
        attribute vec2 texCoord;

        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;

        varying vec2 vTexCoord;

        void main() {
          vTexCoord = texCoord;
          gl_Position = projectionMatrix * modelViewMatrix * vertCoord;
        }
      `,e.fragment||`
        precision mediump float;

        uniform sampler2D image;
        uniform float time;

        varying vec2 vTexCoord;

        void main() {
          gl_FragColor = texture2D(image, vTexCoord);
        }
      `),(e.autoLoad!==!1&&!this.element||e.autoLoad!==!1&&this.element&&e.visibleLoad===!1)&&this.load()}static async preload(i,e,t=!1){let r=new Image;return r.crossOrigin="anonymous",r.src=e,new Promise((o,s)=>{let n=E(S(r,"error",a=>{n(),s(a)}),S(r,"load",()=>{n();let a=Ve.loadTexture(i,r);if(a){let l={texture:a,image:r,keep:t};this.cache.set(e,l),o(l)}else s(new Error("could not load texture: "+e))}))})}static loadTexture(i,e,t){let r=t||i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.bindTexture(i.TEXTURE_2D,null),r}static unloadTexture(i,e){let t=[];Ve.cache.forEach(({texture:s,keep:n},a)=>{s===e&&!n&&t.push(a)}),t.forEach(s=>Ve.cache.delete(s)),Array.from(Ve.cache.values()).filter(({texture:s})=>e===s).length===0&&i.deleteTexture(e)}visibilityChanged(i){i&&!this.isLoaded()&&this.config.visibleLoad!==!1&&this.load()}get imageSize(){let i=this.textures.get("image");return{width:i?.image?i.image.naturalWidth:0,height:i?.image?i.image.naturalHeight:0}}isLoading(){return this.imageLoading}get loaded(){return this.loadResolver.promise}isLoaded(){return this.loadResolver.completed}loadEnd(){if(this.loadResolver.completed){console.warn("image loadend already called");return}this.emit("loadend"),this.loadResolver.resolve(),this.imageLoading=!1,this.config.width===void 0&&this.config.height===void 0&&this.setSize(this.imageSize)}setSource(i){return this.config.source=i,this.imageLoading=!1,this.loadResolver=new pe,this.load()}async load(){if(await this.created.promise,this.loadResolver.completed||this.imageLoading)return this.loadResolver.promise;let i=this.config.mainSlot||"image";if(Ve.cache.has(this.config.source)){let e=Ve.cache.get(this.config.source);e&&e.texture&&e.image?(this.imageLoading=!0,this.setTexture(i,e),this.loadEnd()):console.warn("image: cache is invalid for "+this.config.source)}else{this.imageLoading=!0;let e=this.textures.get(i);await this.loadTexture(i,this.config.source),this.loadEnd(),e&&this.unloadTexture(e.texture)}return this.loadResolver.promise}async loadTexture(i,e,t=!1){return this.setTexture(i,await Ve.preload(this.viewport.gl,e,t))}setTexture(i,e){return this.textures.set(i,e),e}bindTextures(){let i=this.viewport.gl,e=0;this.textures.forEach(({texture:t},r)=>{let o=this.program.registerUniform(r);e++,o&&(i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(o,e))}),this.emit("bindtexture")}unbindTextures(){let i=this.viewport.gl;for(let e=0,t=this.textures.size+1;e<t;e++)i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,null)}render(i=0){this.textures.size>0&&super.render(i)}beforeDraw(){super.beforeDraw(),this.bindTextures()}afterDraw(){super.beforeDraw(),this.unbindTextures()}async recalc(){this.buffers.texCoord.update(await Ot(this.segments,nn)),super.recalc()}unloadTexture(i){i&&this.config.noCache===!0&&Ve.unloadTexture(this.viewport.gl,i)}onDestroy(){super.onDestroy(),this.textures.forEach(({texture:i})=>this.unloadTexture(i))}},ht=Ve;ht.cache=new Map});var an,fi,sr=h(()=>{"use strict";M();We();Ct();_t();ci();qt();an={width:1,height:1},fi=class extends $e{constructor(e,t){super(e,t),this.viewport=e,this.config=t,this.textCoord=new Tt,this.ticker=U.main,this.playing=!1,this.video=t.source,this.program=new Xe(e.gl,t.vertex||`
        attribute vec4 vertCoord;
        attribute vec2 texCoord;

        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;

        varying vec2 vTexCoord;

        void main() {
          vTexCoord = texCoord;
          gl_Position = projectionMatrix * modelViewMatrix * vertCoord;
        }
      `,t.fragment||`
        precision mediump float;

        uniform sampler2D image;

        varying vec2 vTexCoord;

        void main() {
          gl_FragColor = texture2D(image, vTexCoord);
        }
      `),this.buffers.texCoord=this.textCoord,this.unlistenVideo=E(S(this.video,"play",()=>this.handlePlay()),S(this.video,"pause",()=>this.handleStop()),S(this.video,"stop",()=>this.handleStop()),S(this.video,"playing",()=>{this.playing=!0}))}onCreate(){super.onCreate(),this.texture=this.viewport.gl.createTexture(),this.updateTexture()}onDestroy(){super.onDestroy(),this.texture&&this.viewport.gl.deleteTexture(this.texture),this.unlistenVideo&&this.unlistenVideo(),this.handleStop()}handlePlay(){this.playTask||(this.playTask=this.ticker.add(()=>this.updateTexture()))}handleStop(){this.playTask&&(this.playTask.kill(),delete this.playTask)}updateTexture(){if(this.texture&&this.viewport&&this.playing){let e=this.viewport.gl,t=this.video;e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}}beforeDraw(){if(this.viewport&&this.texture){let e=this.viewport.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture)}}async recalc(){if(super.recalc(),this.viewport&&this.texture){let e=this.viewport.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture),this.textCoord.update(await Ot(this.segments,an))}}}});var nr,Nt,Ut,ar=h(()=>{"use strict";le();O();ui();nr=(i=>(i.SCROLL="scroll",i))(nr||{}),Nt={name:"default",fov:45,posZ:-3},Ut=class extends F{constructor(e={}){super(),this._projection=hi(),this._scrollPosition={x:0,y:0},this._viewportSize={width:0,height:0},this.config={...Nt,...e}}get projection(){return this._projection}get fov(){return this.config.fov||Nt.fov}get aspect(){return this._viewportSize.width/this._viewportSize.height}get name(){return this.config.name||Nt.name}get viewSize(){let e=this.config.fov*Math.PI/180,t=2*Math.tan(e/2)*Math.abs(this.config.posZ);return{width:t*this.aspect,height:t}}getClipSpaceX(e){let t=this.viewSize.width*.5;return N(e/this._viewportSize.width*2-1,-1,1,-t,t)}getClipSpaceY(e){let t=this.viewSize.height*.5;return N(e/this._viewportSize.height*-1*2+1,-1,1,-t,t)}getClipSpaceWidth(e){return e/this._viewportSize.width*this.viewSize.width}getClipSpaceHeight(e){return e/this._viewportSize.height*this.viewSize.height}getClipsSpaceCoord(e,t){return{x:this.getClipSpaceX(e),y:this.getClipSpaceY(t)}}getClipsSpaceSize(e,t){return{width:this.getClipSpaceWidth(e),height:this.getClipSpaceHeight(t)}}setViewportSize(e){this._viewportSize=e,this.updateProjection()}scrollTo(e){(H(e.x)||H(e.y))&&(ir(this._projection,[H(e.x)?this.getClipSpaceWidth(this._scrollPosition.x-e.x):void 0,H(e.y)?this.getClipSpaceHeight(e.y-this._scrollPosition.y):void 0]),H(e.x)&&(this._scrollPosition.x=e.x),H(e.y)&&(this._scrollPosition.y=e.y)),this.emit("scroll",this._scrollPosition)}updateProjection(){this._projection=Lo(Co(this._projection),this.config.fov*Math.PI/180,this.aspect,.1,100),ir(this._projection,[this.getClipSpaceWidth(this._scrollPosition.x),this.getClipSpaceHeight(this._scrollPosition.y),this.config.posZ])}}});var Ro,lr,pi,cr=h(()=>{"use strict";O();ar();Ro={...Nt,name:"viewport",color:[0,0,0],alpha:!0,antialias:!0,premultipliedAlpha:!0,pixelRatio:1,depth:!0},lr=(i=>(i.RESIZE="resize",i.SCROLL="scroll",i))(lr||{}),pi=class extends Ut{constructor(e,t=Ro){let r={...Ro,...t};super(r),this.element=e,this._containers=[],this.config=r;let o=this.element.getContext("webgl2",this.config)||this.element.getContext("webgl")||this.element.getContext("webgl-experimental");if(!o)throw new Error("WebGL not supported");this._gl=o}get gl(){return this._gl}render(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}attach(){this.setSize(Ii(this.config.width)?this.config.width:this.element.offsetWidth,Ii(this.config.height)?this.config.height:this.element.offsetHeight);let e=this.config.color||[0,0,0],t=this.config.alpha;this.gl.enable(this.gl.BLEND),this.gl.enable(this.gl.CULL_FACE),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor(e[0],e[1],e[2],t?0:1),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}get pixelRatio(){return this.config.pixelRatio||window.devicePixelRatio||1}setSize(e,t){this.element.width=e*this.pixelRatio,this.element.height=t*this.pixelRatio,this.element.style.width=`${e}px`,this.element.style.height=`${t}px`,this.setViewportSize({width:e,height:t}),this._containers.forEach(r=>r.setViewportSize({width:e,height:t})),this.gl.viewport(0,0,e,t),this.emit("resize",{width:e,height:t})}getContainerProjection(e){return this.getContainer(e)?.projection}getContainer(e){return this._containers.find(t=>t.name===e)}createContainer(e){let t=new Ut(e);return t.setViewportSize(this._viewportSize),this._containers.push(t),t}removeContainer(e){let t=this._containers.findIndex(r=>typeof e=="string"?r.name===e:r===e);return t>-1?(this._containers.splice(t,1),!0):!1}}});var ut,di,ko=h(()=>{"use strict";le();ae();We();or();qt();sr();cr();ut=(i=>(i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i))(ut||{}),di=class extends F{constructor(e={}){super(),this.config=e,this.ticking=!0,this.meshes=[],this.paused=!1,this.startTime=0,this.pauseTime=0,this.pauseStart=0,this.ticker=e.ticker||U.main,this.viewport=new pi(this.initCanvas(e.canvas),e),this.observable=k(window,{resizeDetection:!0}),e.autoCreate!==!1&&this.create()}create(){if(this.config.fullscreen!==!1){let t=this.viewport.element.style,r=this.observable.size;t.pointerEvents="none",t.position="fixed",t.left="0px",t.top="0px",this.setSize(r.width,r.height),this.unlistenResize=this.observable.onChange(o=>{this.setSize(o.width,o.height)})}this.viewport.on(lr.RESIZE,()=>this.recalc()),this.viewport.attach();let e=this.config.taskOrder!==void 0?this.config.taskOrder:100;this.startTime=U.now(),this.task=this.ticker.add((t,r)=>{this.ticking&&this.render(r)},e)}destroy(){this.unlistenResize&&(this.unlistenResize(),delete this.unlistenResize),this.task&&(this.task.kill(),delete this.task)}initCanvas(e){if(e instanceof HTMLCanvasElement)return e;if(typeof e=="string")return document.querySelector(e);let t=document.createElement("canvas");return document.body.prepend(t),t}get vp(){return this.viewport}get gl(){return this.viewport.gl}setSize(e,t){this.viewport.setSize(e,t)}clipSpaceX(e){return this.viewport.getClipSpaceX(e)}clipSpaceY(e){return this.viewport.getClipSpaceY(e)}clipSpaceW(e){return this.viewport.getClipSpaceWidth(e)}clipSpaceH(e){return this.viewport.getClipSpaceHeight(e)}scrollTo(e){this.viewport.scrollTo(e)}recalc(){for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e].recalc()}pause(e=!0,t=!0){e!==this.paused&&(this.paused=e,t&&(e?this.pauseStart=U.now():this.pauseStart>0&&(this.pauseTime+=U.now()-this.pauseStart,this.pauseStart=0)))}add(...e){return e.forEach(t=>this.meshes.push(t.create())),this}remove(e){let t=this.meshes.indexOf(e);return t>-1&&this.meshes.splice(t,1).forEach(r=>r.destroy(this.viewport)),this}render(e=U.now()){let t=e-this.pauseTime-this.startTime;if(this.paused)return;this.meshes=this.meshes.sort((o,s)=>s.model[14]-o.model[14]);let r=this.meshes.filter(o=>!o.disabled);if(r.length>0){this.emit("beforerender",t),this.viewport.render();for(let o=0,s=r.length;o<s;o++)r[o].render(t);this.emit("afterrender",t)}}createMesh(e,t,r){let o=new e(this.viewport,t);return typeof r=="function"&&r(o),this.add(o),o}plane(e,t){return this.createMesh($e,e,t)}video(e,t){return this.createMesh(fi,e,t)}image(e,t){return this.createMesh(ht,e,t)}container(e){let t=this.viewport.createContainer(e);return this.meshes.filter(r=>r.isInsideContainer(e.name)).forEach(r=>{r.updateProjection()}),t}getContainer(e){return this.viewport.getContainer(e)}}});var mt=h(()=>{"use strict";ko();rr();_t();cr();Ct();or();qt();sr()});var At,Po=h(()=>{wt();z();ge();re();At=class i extends W{get name(){return"scroller"}get child(){return i}init(){return _e(this,void 0,void 0,function*(){let e=this.config.scroller;this.router.activated&&this.config.reset&&(yield this.router).on(R.AFTER_ENTER,()=>{setTimeout(()=>e.scrollTo({x:0,y:0},!0))}),this.resolve(e)})}};Fe([x(_),je("design:type",_)],At.prototype,"router",void 0)});var G,Ge=h(()=>{wt();z();mt();re();Po();G=class i extends W{get name(){return"webgl"}get child(){return i}init(){return _e(this,void 0,void 0,function*(){let e=new di(this.config);this.scroller.activated&&(yield this.scroller).onScroll(t=>e.scrollTo(t)),this.resolve(e)})}};Fe([x(At),je("design:type",At)],G.prototype,"scroller",void 0);Fe([x(_),je("design:type",_)],G.prototype,"router",void 0)});var gi,Lt,K,Be=h(()=>{"use strict";z();O();mt();re();Ge();gi=class{constructor(e,t,r){this.composer=e;this.router=t;this.webgl=r}loaderResolver=new pe;resolver=new pe;loading=!1;async load(e){if(this.resolver.completed||this.loading)return;this.loading=!0;let r=await(await fetch("/_/static/projects.json")).json(),o=[],s=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),n=["/","/about/"],a=["/_/static/media/about.webp","/_/static/media/aboutd.webp"];if(Object.values(r).forEach(l=>{n.push(`/case/${l.slug}/`)}),this.webgl){let l=[];for(let d of n)l.push(this.router.render(d,{style:{display:"none"}}));Promise.all(l).then(()=>this.composer.update());let c=0,u=Object.values(r).reduce((d,p)=>d+p.modules.length+p.teasers.length,0)+a.length;for(let d of Object.values(r)){for(let p of d.modules){if(!p.image){++c;continue}let g=ht.preload(this.webgl.gl,s+p.image.url,!0);o.push(g),g.then(()=>e(++c/u,u))}for(let p of d.teasers){let g=ht.preload(this.webgl.gl,s+p.url,!0);o.push(g),g.then(()=>e(++c/u,u))}}for(let d of a){let p=ht.preload(this.webgl.gl,s+d,!0);o.push(p),p.then(()=>e(++c/u,u))}}await Promise.all(o).then(()=>this.loaderResolver.resolve())}resolve(){this.resolver.resolve()}loaded(){return this.loaderResolver.promise}done(){return this.resolver.promise}},Lt=class Lt extends W{get name(){return"preloader"}get child(){return Lt}webgl;router;composer;async init(){let e=await this.router;if(this.webgl.activated){let t=await this.webgl;this.resolve(new gi(this.composer,e,t))}else this.resolve(new gi(this.composer,e))}};m([x(G)],Lt.prototype,"webgl",2),m([x(_)],Lt.prototype,"router",2),m([I()],Lt.prototype,"composer",2);K=Lt});var T,te=h(()=>{"use strict";z();ae();V();Be();Et();T=class{constructor(e){this.element=e;let t="-5%";this.element.dataset.noScreenPadding==="1"&&(t="0px"),this.animObservable=k(e,{visibilityDetection:{rootMargin:"0px 0px "+t}})}onEnter=f.noop();onLeave=f.noop();locked=!1;overridden=!1;elementEntered=!1;unlistenEnter;animObservable;visibilityAnimation=!0;preloader;viewport;onCreate(){this.update()}recalc(){return this.animObservable.update(),this}update(){this.elementEntered=!1;let e=this.onEnter,t=this.onLeave;return t.stop(),e.stop(),e instanceof Ee?e.seek(0,!0,!0,!0):e.reset().seek(0,!0,!0),t.onStop(()=>this.listenForVisibility()),this.animObservable.visible?requestAnimationFrame(()=>{!this.locked&&!this.elementEntered&&(this.elementEntered=!0,this.preloader.done().then(()=>{this.overridden||e.start()}))}):this.listenForVisibility(),this}lock(e=!0){return this.locked=e,this}override(){return this.overridden=!0,this}reset(){return this.elementEntered=!1,this.onEnter.reset().stop(),this}listenForVisibility(){this.visibilityAnimation&&(this.unlistenEnter&&this.unlistenEnter(),this.elementEntered=!1,this.unlistenEnter=this.animObservable.onVisChange(e=>{e.visible&&(!this.locked&&!this.elementEntered&&(this.elementEntered=!0,this.preloader.done().then(()=>{this.overridden||this.onEnter.start()})),this.unlistenEnter&&(this.unlistenEnter(),delete this.unlistenEnter))}))}isVisible(){return this.animObservable.visible}isInEntry(){return this.animObservable.update(),this.animObservable.y<(this.viewport?.height||window.innerHeight)}};m([x(K,!0)],T.prototype,"preloader",2),m([x(ve,!0)],T.prototype,"viewport",2)});var Ze,hr=h(()=>{"use strict";z();V();O();te();Ze=class extends T{onEnter=f.staggerFromTo(Ne("p span",this.element),{y:100,opacity:0},{y:0,opacity:1},{units:{y:"%"},easing:y.easeOutSine,duration:1200,stagger:{offset:.02},timeline:{autoStart:!1}});onLeave=f.staggerTo(Ne("p span",this.element),{y:-100,opacity:0},{units:{y:"%"},easing:y.easeOutExpo,duration:800})};Ze=m([A("about-items")],Ze)});var Se,Ye,ur=h(()=>{"use strict";z();M();te();re();ge();Se=class{constructor(e){this.element=e}active=!1;animations=[];composer;router;onCreate(){this.animations=this.composer.query(T,this.element).map(({component:e})=>e)}onListen(){return this.router.on(R.NAV_START,()=>{this.toggle(!1)})}toggle(e=!this.active){let t=document.documentElement;this.active=t.classList.toggle("is-menu-active",e),e?this.animations.forEach(r=>{r.onLeave.stop(),r.onEnter.start()}):this.animations.forEach(r=>{r.onEnter.stop(),r.onLeave.start()})}};m([I()],Se.prototype,"composer",2),m([x(_,!0)],Se.prototype,"router",2),Se=m([A("menu")],Se);Ye=class{constructor(e){this.element=e}menu;composer;onCreate(){this.menu=this.composer.query(Se)[0].component}onListen(){return S(this.element,"click",()=>{this.menu&&this.menu.toggle()})}};m([I()],Ye.prototype,"composer",2),Ye=m([A("menu-trigger")],Ye)});var mr,Wt,fr=h(()=>{"use strict";le();ae();mr=(i=>(i.RECALC="recalc",i))(mr||{}),Wt=class extends F{constructor(e){super(),this.config=e,this.dynamic=!1;let t={resizeDetection:!0,...e.observer,autoAttach:!1};this.dynamic=e.element instanceof HTMLElement,this.container=k(this.dynamic?document.createElement("div"):e.element.container,t),this.wrapper=k(this.dynamic?document.createElement("div"):e.element.wrapper,t),e.observer!==!1&&(this.wrapper.onDimChange(()=>this.emit("recalc")),this.container.onDimChange(()=>this.emit("recalc"))),this.dynamic&&(this.container.ref.classList.add("smoovy-container"),this.wrapper.ref.classList.add("smoovy-wrapper"),this.container.ref.appendChild(this.wrapper.ref))}recalc(e=!1){e?requestAnimationFrame(()=>{this.wrapper.update(),this.container.update()}):(this.wrapper.update(),this.container.update())}attach(){if(this.wrapper.attach(),this.container.attach(),this.dynamic){let e=this.config.element,t=Array.from(e.childNodes);e.appendChild(this.container.ref),this.wrapper.ref.append(...t)}}detach(){if(Oe(this.wrapper),Oe(this.container),this.dynamic){let e=this.config.element,t=Array.from(this.wrapper.ref.childNodes);e.append(...t),e.removeChild(this.container.ref)}}}});var L,Ae,ie=h(()=>{"use strict";le();M();O();fr();L=(i=>(i.LOCK="lock",i.DELTA="delta",i.OUTPUT="output",i.VIRTUAL="virtual",i.RECALC="recalc",i.TWEEN_TO="tween_to",i.SCROLL_TO="scroll_to",i.TRANSFORM_DELTA="~delta",i.TRANSFORM_VIRTUAL="~virtual",i.TRANSFORM_OUTPUT="~output",i))(L||{}),Ae=class extends F{constructor(e,t){super(),this.attached=!1,this.locks=[],this.availableBehaviors=new Map,this.attachedBehaviors=new Map,this.position={output:{x:0,y:0},virtual:{x:0,y:0}},e instanceof Wt?this.dom=e:this.dom=new Wt(e instanceof HTMLElement?{element:e}:e);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.setBehavior(r,t[r]);this.attach()}attach(){this.attached||(this.attached=!0,this.unlisten=E(this.dom.on(mr.RECALC,()=>{this.updateDelta({x:0,y:0}),requestAnimationFrame(()=>this.emit("recalc"))}),this.on("delta",e=>{this.isLocked()||this.updateDelta(e)})),this.dom.attach(),this.availableBehaviors.forEach((e,t)=>{this.attachBehavior(t)}))}destroy(){this.attached&&(this.attached=!1,typeof this.unlisten=="function"&&(this.unlisten(),delete this.unlisten),this.dom.detach(),this.attachedBehaviors.forEach(e=>{typeof e=="function"&&e.call(this)}))}recalc(e=!1){this.dom.recalc(e),e?requestAnimationFrame(()=>this.emit("recalc")):this.emit("recalc")}get behaviors(){return this.availableBehaviors}setBehavior(e,t){this.availableBehaviors.set(e,t)}deleteBehavior(e){return this.attachedBehaviors.has(e)&&this.detachBehavior(e),this.availableBehaviors.delete(e)}attachBehavior(e){let t=this.availableBehaviors.get(e);return t&&!this.attachedBehaviors.get(e)?(this.attachedBehaviors.set(e,t(this)),!0):!1}detachBehavior(e){let t=this.attachedBehaviors.get(e);return t?(t.call(this),this.attachedBehaviors.delete(e),!0):!1}updateDelta(e){let t=this.position.virtual;this.emit("~delta",e,r=>{e.x=r.x,e.y=r.y}),this.updatePosition({x:H(e.x)?t.x-e.x:void 0,y:H(e.y)?t.y-e.y:void 0})}updatePosition(e){this.isLocked()||(e&&H(e.x)&&(this.position.virtual.x=e.x),e&&H(e.y)&&(this.position.virtual.y=e.y),this.emit("virtual",this.position.virtual),this.emit("~virtual",this.position.virtual,t=>{this.position.virtual.x=t.x,this.position.virtual.y=t.y}),this.isEventMuted("~output")||!this.hasEventListeners("~output")?this.updateOutput(this.position.virtual):this.emit("~output",{pos:this.position.output,step:t=>this.updateOutput(t)}))}updateOutput(e){this.isLocked()||(this.position.output.x=e.x,this.position.output.y=e.y,this.emit("output",e))}lock(e="default",t=!0){!this.locks.includes(e)&&t?(this.locks.push(e),this.emit("lock",{name:e,enable:t})):t||this.unlock(e)}unlock(e="default"){let t=this.locks.indexOf(e);t>-1&&(this.locks.splice(t,1),this.emit("lock",{name:e,enable:!1}))}isLocked(e){return e?this.locks.includes(e):this.locks.length>0}scrollTo(e,t=!1){this.isLocked()||this.emit("scroll_to",{pos:e,immediate:t})}onVirtual(e){return this.on("virtual",e)}onScroll(e){return this.on("output",e)}onDelta(e){return this.on("delta",e)}}});var ln,pr,dr=h(()=>{"use strict";M();ie();ln=(i={})=>e=>{let t=i.focusTarget||window,r=e.dom.container.ref,o=i.ignoreInside||[],s=a=>{a.preventDefault(),r.scrollLeft=r.scrollTop=0},n=a=>{requestAnimationFrame(()=>{let l=a.target;for(;l.shadowRoot&&l.shadowRoot.activeElement;)l=l.shadowRoot.activeElement;if(!(l instanceof HTMLElement))return;if(!o.map(u=>u.contains(l)).includes(!0)&&l){let u=l.getBoundingClientRect(),d=e.dom.container.ref.getBoundingClientRect();if(!(u.bottom>0&&u.top<d.height&&u.right>0&&u.left<d.width))if(i.nativeTarget){let g=e.position.virtual;i.nativeTarget.scrollTo(g.x+u.left-d.width/2,g.y+u.top-d.height/2)}else e.emit(L.DELTA,{y:-u.top+d.height/2,x:-u.left+d.width/2})}})};return E(S(r,"scroll",s),t?S(t,"focus",n,!0):void 0)},pr=ln});var cn,vi,yi=h(()=>{"use strict";M();ae();O();ie();cn=(i={})=>e=>{let t=e.dom,r=i.wrapper?k(i.wrapper,{resizeDetection:!0}):t.wrapper,o=i.container?k(i.container,{resizeDetection:!0}):t.container,s=i.useScrollSize&&!(r.ref instanceof Window);return i.container&&o.update(),i.wrapper&&r.update(),E(e.on(L.TRANSFORM_VIRTUAL,n=>{let a=s?r.scrollSize:r.size,l=Math.max(a.width-o.width,0),c=Math.max(a.height-o.height,0);return{x:xe(n.x,0,l),y:xe(n.y,0,c)}}),()=>{i.container&&Oe(o),i.wrapper&&Oe(r)})},vi=cn});function zo(i,e=100,t=250,r=200,o=1/0){let s={x:0,y:0};switch(i.key){case" ":s.y=-r;break;case"ArrowLeft":s.x=e;break;case"ArrowRight":s.x=-e;break;case"ArrowDown":s.y=-e;break;case"ArrowUp":s.y=e;break;case"PageDown":s.y=-t;break;case"PageUp":s.y=t;break;case"Home":s.y=o;break;case"End":s.y=-o;break}return s}var Mo=h(()=>{"use strict"});var hn,un,Io,Do=h(()=>{"use strict";M();O();ie();Mo();hn={passive:!1,target:Y.client?document.documentElement:void 0,eventName:"keydown",arrowDelta:100,pageDelta:250,spaceDelta:200,homeEndDelta:1/0},un=(i={})=>{let e=Object.assign({...hn},i);return t=>{let r=e.target,o=s=>{let n=zo(s,e.arrowDelta,e.pageDelta,e.spaceDelta,e.homeEndDelta);(n.x||n.y)&&t.emit(L.DELTA,n)};return Y.wheelEvent?S(r,e.eventName,o,{passive:i.passive}):void 0}},Io=un});var mn,fn,Ke,Rt=h(()=>{"use strict";M();We();O();ie();mn={damping:.1,precision:.009,mobileDamping:.18,multiplyDelta:!0,deltaBaseHz:60},fn=(i={})=>{let e=Object.assign({...mn},i);return t=>{let r=!1,o=!1,s,n=e.ticker||U.main,a=Y.mobile?e.mobileDamping:e.damping,l=t.on(L.TRANSFORM_OUTPUT,u=>{o=!1,s=u}),c=n.add(u=>{if(!s||o)return;let d=u*(e.deltaBaseHz/1e3),p=e.precision,g=a*(e.multiplyDelta?d:1),v=t.position.virtual,w=me(s.pos.x,v.x,g),C=me(s.pos.y,v.y,g),j=Math.abs(v.x-w),se=Math.abs(v.y-C),ne={x:w,y:C},Z=j-p>0||se-p>0;!r&&Z&&(r=!0),j<p&&se<p?(o=!0,r=!1):s.step(ne)});return E(t.on(L.SCROLL_TO,u=>{o=!0,u.skipOutputTransform&&t.muteEvents(L.TRANSFORM_OUTPUT);let d={x:0,y:0};typeof u.pos.x=="number"&&(d.x=t.position.virtual.x-u.pos.x),typeof u.pos.y=="number"&&(d.y=t.position.virtual.y-u.pos.y),t.updateDelta(d),u.skipOutputTransform&&t.unmuteEvents(L.TRANSFORM_OUTPUT)}),l,()=>c?.kill())}},Ke=fn});var pn,dn,ft,Xt=h(()=>{"use strict";M();O();ie();pn={passive:!1,multiplier:1,enablePlatformMultiplier:!0,multiplierFirefox:25},dn=(i={})=>{let e=Object.assign({...pn},i),t={delta:Ie(e.multiplier)?e.multiplier:()=>e.multiplier,firefox:Ie(e.multiplierFirefox)?e.multiplierFirefox:()=>e.multiplierFirefox,enablePlatform:Ie(e.enablePlatformMultiplier)?e.enablePlatformMultiplier:()=>e.enablePlatformMultiplier};return r=>{let o=e.target||document.documentElement,s=n=>{let a={x:0,y:0},l=1;i.passive||n.preventDefault(),t.enablePlatform()&&!Y.windows&&(l=.4),a.x=n.deltaX*-1,a.y=n.deltaY*-1,a.x*=t.delta()*l,a.y*=t.delta()*l,Y.firefox&&n.deltaMode===1&&(a.x*=t.firefox(),a.y*=t.firefox()),r.emit(L.DELTA,a)};return E(Y.wheelEvent?S(o,"wheel",s,{passive:e.passive}):void 0)}},ft=dn});var gn,vn,gr,vr=h(()=>{"use strict";M();O();ie();gn={target:Y.client?window:void 0,resetTimeout:100,nativeHandler:!1,immediate:!0},vn=(i={})=>{let e=Object.assign({...gn},i);return t=>{let r=!1,o={x:0,y:0},s=document.createElement("div"),n=t.dom.container.ref.parentElement,a=d=>{let p=t.dom.wrapper.height;s.style.height=`${d??p}px`};a(),n&&n.append(s);let l=!1,c=!1,u;return E(()=>s.remove(),e.target?S(e.target,"scroll",()=>{e.nativeHandler?t.emit(L.DELTA,{x:t.position.virtual.x-window.scrollX,y:t.position.virtual.y-window.scrollY}):l||(c=!0,t.scrollTo({x:window.scrollX,y:window.scrollY},e.immediate))}):void 0,e.nativeHandler?void 0:t.onVirtual(d=>{e.target&&!c&&(l=!0,e.target.scrollTo(d.x,d.y)),clearTimeout(u),u=setTimeout(()=>{l=!1,c=!1},e.resetTimeout)}),t.on(L.RECALC,()=>{t.isLocked()||a()}),t.on(L.LOCK,()=>{t.isLocked()&&!r?(r=!0,o.x=t.position.output.x,o.y=t.position.output.y,a(0)):r&&(r=!1,a(),t.scrollTo(o,!0),e.target&&!e.nativeHandler&&e.target.scrollTo(o.x,o.y))}))}},gr=vn});var yn,Qe,kt=h(()=>{"use strict";ie();yn=(i={})=>e=>e.on(L.SCROLL_TO,t=>{let r;t.immediate&&(r=e.muteEvents(L.TRANSFORM_OUTPUT));let o=e.position.virtual;if(i.nativeTarget){let s={};typeof t.pos.x=="number"&&(s.left=t.pos.x),typeof t.pos.y=="number"&&(s.top=t.pos.y),i.nativeTarget.scrollTo({behavior:t.immediate?"auto":i.nativeBehavior||"smooth",...s})}else{let s={};typeof t.pos.x=="number"&&(s.x=-(t.pos.x-o.x)),typeof t.pos.y=="number"&&(s.y=-(t.pos.y-o.y)),e.updateDelta(s)}requestAnimationFrame(()=>{r&&r()})}),Qe=yn});var bn,xn,yr,br=h(()=>{"use strict";bn={defaults:{width:"100%",height:"100%",overflow:"hidden"}},xn=(i={})=>{let e=i;return i.defaults||(e.defaults=bn.defaults),t=>{let r=t.dom.container.ref;for(let o in e.defaults)Object.prototype.hasOwnProperty.call(e.defaults,o)&&(r.style[o]=e.defaults[o]);return()=>{for(let o in e.defaults)Object.prototype.hasOwnProperty.call(e.defaults,o)&&(r.style[o]="")}}},yr=xn});var wn,En,Pt,bi=h(()=>{"use strict";M();We();O();ie();wn={passive:!1,deltaMultiplier:1,velocityDamping:.08,velocityMultiplier:20,minimumThreshold:2},En=(i={})=>{let e=Object.assign({...wn},i),t=Ie(e.deltaMultiplier)?e.deltaMultiplier:()=>e.deltaMultiplier,r=Ie(e.velocityDamping)?e.velocityDamping:()=>e.velocityDamping,o=Ie(e.velocityMultiplier)?e.velocityMultiplier:()=>e.velocityMultiplier,s=Ie(e.minimumThreshold)?e.minimumThreshold:()=>e.minimumThreshold;return n=>{let a=document.documentElement,l=e.target||a,c=U.main,u={x:0,y:0},d={x:0,y:0},p=s(),g,v=0,w=!1,C=Z=>Z instanceof MouseEvent?{pageX:Z.pageX,pageY:Z.pageY}:Z.targetTouches?Z.targetTouches[0]:Z,j=Z=>{g&&(g.kill(),g=void 0);let be=C(Z);u.x=be.pageX,u.y=be.pageY,w=!0},se=()=>{w&&(d.x!==0||d.y!==0)&&(g=c.add((Z,be,$)=>{d.x=me(d.x,0,r()),d.y=me(d.y,0,r()),d.x=isFinite(d.x)?d.x:0,d.y=isFinite(d.y)?d.y:0,n.emit(L.DELTA,d),we(d.x,p,-p)&&we(d.y,p,-p)&&(d.x=0,d.y=0,$(),g=void 0)})),w=!1},ne=Z=>{if(w){Z.preventDefault();let be={x:0,y:0},$=C(Z);be.x=($.pageX-u.x)*t(),be.y=($.pageY-u.y)*t();let ki=U.now()-v;d.x=(u.x-$.pageX)/ki,d.y=(u.y-$.pageY)/ki,d.x*=-1*o(),d.y*=-1*o(),u.x=$.pageX,u.y=$.pageY,v=U.now(),n.emit(L.DELTA,be)}};return E(S(l,"touchstart",j,{passive:e.passive}),S(a,"touchmove",ne,{passive:e.passive}),S(a,"touchend",se,{passive:e.passive}),e.enableMouseEvents?E(S(l,"mousedown",j,{passive:e.passive}),S(a,"mousemove",ne,{passive:e.passive}),S(a,["mouseup","mousecancel"],se,{passive:e.passive})):void 0)}},Pt=En});var Sn,xr,Tn,wr,Er=h(()=>{"use strict";M();O();ie();Sn={firefoxFix:!0,initialStyles:!0,precision:2,mapPos:i=>i},xr=(i,e,t=!1,r)=>{r&&(e=r(e));let o=`translate3d(${-e.x}px, ${-e.y}px, 0)`;t&&(o+=" rotate3d(0.01, 0.01, 0.01, 0.01deg)"),i.style.transform=o},Tn=(i={})=>{let e=Object.assign({...Sn},i),t=e.firefoxFix&&Y.firefox;return r=>{let o=r.dom.wrapper.ref,s=E(r.on(L.OUTPUT,n=>{if(!r.isLocked()){let a=parseFloat(n.x.toFixed(e.precision)),l=parseFloat(n.y.toFixed(e.precision));xr(o,{x:a,y:l},t,e.mapPos)}}),r.on(L.RECALC,()=>{let n=r.position.virtual;r.isLocked()||xr(o,n,t,e.mapPos)}));return e.initialStyles&&xr(o,{x:0,y:0},t,e.mapPos),()=>{o.style.transform="",s()}}},wr=Tn});var Fo,jo=h(()=>{"use strict";dr();yi();Do();Rt();Xt();vr();kt();br();bi();Er();ie();Fo=(i,e={})=>new Ae(i,{clampContent:vi(),scrollTo:Qe(),bypassFocus:pr(e.focus),touchInertia:Pt(e.touch),lerpContent:Ke(e.lerp),mouseWheel:ft(e.mouse),translate:wr(e.translate),styleContainer:yr({defaults:e.scrollbar?{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",...e.styles}:e.styles}),keyboard:Io(e.keyboard),...e.scrollbar?{nativeScrollbar:gr({...typeof e.scrollbar=="object"?e.scrollbar:{}})}:{},...e.behaviors||{}})});var Sr=h(()=>{"use strict";M();O();ie()});var Ho=h(()=>{"use strict";O();dr();Sr();yi();Rt();vr();kt();br();Er();ie()});var Cm,Vo=h(()=>{"use strict";M();O();ie();Cm={target:Y.client?window:void 0,resetTimeout:100}});var Bo=h(()=>{"use strict";O();Sr();yi();Rt();Xt();Vo();kt();ie()});var xi=h(()=>{"use strict";jo();Ho();Bo();ie();fr()});var wi,Ei,Je,Si=h(()=>{"use strict";z();le();M();We();O();Ge();wi=class extends F{constructor(t){super();this.webgl=t;S(window,"mousemove",({clientX:r,clientY:o})=>{this.inputPosition.x=r,this.inputPosition.y=o}),this.ticker.add(r=>{this.animate(r*.06),this.emit("move",this.outputPosition)})}position=[0,0];glPosition=[0,0];outputPosition={x:0,y:0};inputPosition={x:0,y:0};ticker=new U;damping=.2;animate(t=1){let r=this.inputPosition,o=this.outputPosition;o.x=me(o.x,r.x,this.damping*t),o.y=me(o.y,r.y,this.damping*t),this.position[0]=o.x,this.position[1]=o.y,this.webgl&&(this.glPosition[0]=this.webgl.clipSpaceX(o.x),this.glPosition[1]=this.webgl.clipSpaceY(o.y))}},Ei=class Ei extends W{get name(){return"mouse-emitter"}get child(){return Ei}webgl;async init(){if(this.webgl.activated){let e=await this.webgl;this.resolve(new wi(e))}else this.resolve(new wi)}};m([x(G)],Ei.prototype,"webgl",2);Je=Ei});var Ti,Tr=h(()=>{Ti=`precision highp float;
#define GLSLIFY 1
uniform sampler2D image;uniform float time;uniform float fadeOut;uniform int hide;uniform vec2 planeSize;uniform vec2 offsetScale;uniform vec2 imageSize;uniform float grayscale;varying vec2 vTexCoord;varying float fragDisplacement;varying float occlusion;float rand2(vec2 seed){return fract(sin(dot(seed.xy,vec2(12.9898,78.233)))*43758.5453);}vec2 coverTexture(vec2 uv,vec2 imageSize,vec2 planeSize,bool fitHeight){float imgAsp=imageSize.x/imageSize.y;float plnAsp=planeSize.x/planeSize.y;bool match=imgAsp>plnAsp;if(fitHeight){match=imgAsp<plnAsp;}if(match){uv.x=uv.x*plnAsp/imgAsp+(1.-plnAsp/imgAsp)*0.5;}else{uv.y=uv.y*imgAsp/plnAsp+(1.-imgAsp/plnAsp)*0.5;}return uv;}vec2 scaleTexture(vec2 uv,vec2 factor){vec2 scale=2.0-factor;return vec2(uv.x*scale.x+(1.-scale.x)*0.5,uv.y*scale.y+(1.-scale.y)*0.5);}void main(){if(hide==1){discard;}vec2 texCoord=coverTexture(vTexCoord,imageSize,planeSize+planeSize*offsetScale,false);vec4 color=texture2D(image,texCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));float brightness=fragDisplacement;color=mix(color,vec4(gray,gray,gray,1.0),grayscale);float dither=rand2(vec2(vTexCoord.x,vTexCoord.y)+sin(time))*.25;vec4 texture=vec4(color.rgb+dither*brightness,color.a);gl_FragColor=texture;}`});var Ci,Cr=h(()=>{Ci=`precision highp float;
#define GLSLIFY 1
attribute vec4 vertCoord;attribute vec2 texCoord;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform float time;uniform float scaleProgress;uniform float ripple;uniform float fadeOut;uniform int fadeOutDir;uniform float progress;uniform float curviness;uniform float transition;uniform vec2 planeSize;uniform vec2 planeCenter;uniform vec2 imageSize;uniform vec2 mousePos;uniform vec2 screenSize;uniform int backFace;uniform int scrolling;uniform float bendMult;varying vec2 vTexCoord;varying float fragDisplacement;varying float occlusion;vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}mat4 rotateMatrix_1(float angle,vec3 axis,vec3 origin){float c=cos(angle);float s=sin(angle);float t=1.0-c;vec3 normalizedAxis=normalize(axis);float x=normalizedAxis.x;float y=normalizedAxis.y;float z=normalizedAxis.z;mat4 translateToOrigin=mat4(1.0,0.0,0.0,-origin.x,0.0,1.0,0.0,-origin.y,0.0,0.0,1.0,-origin.z,0.0,0.0,0.0,1.0);mat4 rotationMatrix=mat4(t*x*x+c,t*x*y-s*z,t*x*z+s*y,0.0,t*x*y+s*z,t*y*y+c,t*y*z-s*x,0.0,t*x*z-s*y,t*y*z+s*x,t*z*z+c,0.0,0.0,0.0,0.0,1.0);mat4 translateBack=mat4(1.0,0.0,0.0,origin.x,0.0,1.0,0.0,origin.y,0.0,0.0,1.0,origin.z,0.0,0.0,0.0,1.0);return translateBack*rotationMatrix*translateToOrigin;}mat4 rotateMatrix_0(float angle,vec3 axis,vec3 origin){float c=cos(angle);float s=sin(angle);float t=1.0-c;vec3 normalizedAxis=normalize(axis);float x=normalizedAxis.x;float y=normalizedAxis.y;float z=normalizedAxis.z;mat4 translateToOrigin=mat4(1.0,0.0,0.0,-origin.x,0.0,1.0,0.0,-origin.y,0.0,0.0,1.0,-origin.z,0.0,0.0,0.0,1.0);mat4 rotationMatrix=mat4(t*x*x+c,t*x*y-s*z,t*x*z+s*y,0.0,t*x*y+s*z,t*y*y+c,t*y*z-s*x,0.0,t*x*z-s*y,t*y*z+s*x,t*z*z+c,0.0,0.0,0.0,0.0,1.0);mat4 translateBack=mat4(1.0,0.0,0.0,origin.x,0.0,1.0,0.0,origin.y,0.0,0.0,1.0,origin.z,0.0,0.0,0.0,1.0);return translateBack*rotationMatrix*translateToOrigin;}
#define M_PI 3.141592653589;
vec3 center_0(vec2 size){return vec3(-size.x*.5,size.y*.5,0.0);}vec4 bentPlane(vec4 coords,vec2 planeSize,float radius,float mixAmount,float rotation){vec4 bentCoords=coords;float angle=-planeSize.y*1.5+bentCoords.y*-M_PI;bentCoords.y=sin(angle)*radius-planeSize.y*.5;bentCoords.z=cos(angle)*radius;vec4 mixedCoords=mix(coords,bentCoords,mixAmount);mixedCoords*=rotateMatrix_0(radians(180.*rotation),vec3(1.0,0.0,0.0),center_0(planeSize));return mixedCoords;}float easeInExpo(float x){return x==0. ? 0. : pow(2.,10.*x-10.);}float parabola(float x){return-4.*pow(x-0.5,2.)+1.;}vec3 center(vec2 size){return vec3(-size.x*.5,size.y*.5,0.0);}vec3 bottomLeft(vec2 size){return vec3(0,size.y,0.0);}void main(){vTexCoord=texCoord;vec4 coords=vertCoord;float relProgress=progress;float absProgress=abs(progress);float curveAmount=curviness;float transitionAmount=transition;float anim=sin(time-1.5)*.5+.5;if(backFace==1){coords*=rotateMatrix_1(radians(-180.),vec3(1.0,0.0,0.0),center(planeSize));}float fadeDirMod=fadeOutDir>=0 ? 1.0 :-1.0;curveAmount*=(1.0-fadeOut);coords=bentPlane(coords,planeSize,-0.4,fadeOut,-fadeOut*.5);coords.y+=fadeOut*1.5*fadeDirMod;coords.z+=fadeOut*.2;coords.x-=fadeOut*.1;coords*=rotateMatrix_1(radians(25.*fadeOut*0.5*fadeDirMod),vec3(0.0,0.0,1.0),vec3(0.0))*rotateMatrix_1(radians(-25.*fadeOut*0.5*fadeDirMod),vec3(0.0,1.0,0.0),vec3(0.0));coords=bentPlane(coords,planeSize,-0.4,parabola(transitionAmount),transitionAmount);if(relProgress<0.0){coords=bentPlane(coords,planeSize,-planeSize.y*.3,absProgress*0.7*curveAmount,0.0);coords.x-=absProgress*.4*curveAmount;coords.y+=absProgress*.4*curveAmount;coords*=rotateMatrix_1(radians(-50.*relProgress*curveAmount*1.1),vec3(1.0,0.0,0.0),bottomLeft(planeSize));coords*=rotateMatrix_1(radians(25.*relProgress*curveAmount),vec3(0.0,1.0,0.0),bottomLeft(planeSize));coords*=rotateMatrix_1(radians(25.*relProgress*curveAmount*1.2),vec3(0.0,0.0,1.0),bottomLeft(planeSize));}else if(relProgress>0.0){coords=bentPlane(coords,planeSize,-planeSize.y*.3,absProgress*0.75*curveAmount,0.0);coords.x-=absProgress*.4*curveAmount;coords.y-=absProgress*.25*curveAmount;coords*=rotateMatrix_1(radians(-50.*relProgress*curveAmount*1.2),vec3(1.0,0.0,0.0),vec3(0.0));coords*=rotateMatrix_1(radians(-20.*relProgress*curveAmount*.8),vec3(0.0,1.0,0.0),vec3(0.0));coords*=rotateMatrix_1(radians(30.*relProgress*curveAmount*1.2),vec3(0.0,0.0,1.0),vec3(0.0));}vec4 position=modelViewMatrix*coords;float dist=length(mousePos.xy-position.xy);float bulgeAmount=.2;float bulgeRadius=0.9;float falloff=1.0-smoothstep(0.0,bulgeRadius,dist);float displacement=falloff*bulgeAmount*curviness;position.z+=displacement;fragDisplacement=displacement;float cent=length(position.xy-mousePos.xy);float amp=1.0-smoothstep(ripple,ripple*1.5,cent);float freq=7.0;float rip=sin(cent*freq+parabola(ripple))*amp*.25*parabola(ripple);float buld=(1.0-smoothstep(0.0,0.75,length(position.xy)))*1.5*parabola(scaleProgress);position.z-=rip;position.z-=buld;fragDisplacement+=rip*2.-buld*.5;mat4 projection=projectionMatrix;if(scrolling==0){projection[3].y=0.0;}gl_Position=projection*position;}`});var _r,X,zt=h(()=>{"use strict";z();le();M();ae();ge();xi();Rt();Xt();kt();bi();V();O();mt();re();Et();Ge();Si();Be();Tr();Cr();te();_r=class{uniforms={};constructor(e){this.uniforms={get transition(){return e[0].uniforms.transition.value},set transition(t){for(let r of e)r.uniforms.transition.value=t},get scaleProgress(){return e[0].uniforms.scaleProgress.value},set scaleProgress(t){for(let r of e)r.uniforms.scaleProgress.value=t},get curviness(){return e[0].uniforms.curviness.value},set curviness(t){for(let r of e)r.uniforms.curviness.value=t},get ripple(){return e[0].uniforms.ripple.value},set ripple(t){for(let r of e)r.uniforms.ripple.value=t}}}},X=class{constructor(e){this.element=e;let t=this;this.fadeOut={set value(r){t.fadeOutUniform.value=r},get value(){return t.fadeOutUniform.value}},this.scroller=new Ae({element:{wrapper:document.documentElement,container:e}},{lerp:Ke({damping:.1}),touch:Pt({enableMouseEvents:!0}),mouse:ft(),scrollTo:Qe()})}focusedItem;emitter=new F;items=[];fadeOut={value:0};scroller;itemObservable;renderingLocked=!1;scrollSnapTimeout=-1;resizeTimeout=-1;fadeOutUniform={value:0,type:b.FLOAT};hidden=!1;locked=!1;webgl;mouseEmitter;router;preloader;viewport;projects;composer;getPosition(){return this.itemObservable.coord}async onCreate(){for(let e of this.projects){let t=`[data-project-item="${e.slug}"]`,r=this.element.querySelector(t),o=r.querySelector("[data-project-teaser]");this.itemObservable||(this.itemObservable=k(o,{resizeDetection:!0}));let s={x:0,y:0},n=e.image,a=this.createImage(n,!1,s),l=this.createImage(n,!0,s),c=new _r([a,l]);this.items.push({x:0,y:0,project:e,element:r,sides:[a,l],uniforms:c.uniforms,offsetScale:s,offsetPosition:{x:0,y:0},scrollPosition:{x:0,y:0}})}this.toggleUi(!0),this.checkRoute(!0),this.render(!0),this.preloader.done().then(()=>{setTimeout(()=>{this.composer.query(T,this.element).filter(({element:e})=>this.focusedItem?!this.focusedItem?.element.contains(e):!0).forEach(({component:e})=>{e.lock(!0).onEnter.stop().seek(e.onEnter.duration,!0,!0)})})}),this.hidden||(this.lock(),this.hide(),setTimeout(()=>{this.focusedItem&&(this.hide(),this.preloader.done().then(()=>{this.focusedItem?this.hide([this.focusedItem]):this.show();let e=this.focusedItem;e.uniforms.transition=0,e.uniforms.curviness=0;let t=e.sides[0].width,r=1-129/t;e.offsetScale.x=-r,e.offsetScale.y=-r,e.offsetPosition.x=t*r*.5,e.offsetPosition.y=t*r*.5,f.timeline().add([f.to(e.uniforms,{transition:1,curviness:1},{duration:1800,easing:y.easeInOutExpo}),f.to(e.offsetScale,{x:0,y:0},{duration:1800,easing:y.easeInOutExpo}),f.to(e.offsetPosition,{x:0,y:0},{duration:1800,easing:y.easeInOutExpo})]).then(()=>{requestAnimationFrame(()=>e.uniforms.transition=0),!this.hidden&&this.router.route.url==="/"&&(this.unlock(),this.show())})}))},200))}async onListen(){return E(this.webgl.on(ut.BEFORE_RENDER,()=>this.render()),this.scroller.onScroll(()=>{this.emitter.emit("scroll",this.getScrollEvent())}),this.scroller.on(L.DELTA,()=>{clearTimeout(this.scrollSnapTimeout),this.scrollSnapTimeout=setTimeout(()=>{this.focusedItem&&this.scrollTo(this.focusedItem,!1)},600)}),this.itemObservable.onDimChange(()=>{for(let e of this.items)for(let t of e.sides)t.setSize(this.itemObservable.size)}),...this.items.map(e=>S(e.element.querySelector("a"),"focus",t=>{t.preventDefault(),e!==this.focusedItem&&this.scrollTo(e,!1)})),this.viewport.onChange(()=>{clearTimeout(this.resizeTimeout),this.scrollTo(this.focusedItem,!0),this.resizeTimeout=setTimeout(()=>{this.scrollTo(this.focusedItem,!0)},100)}),this.router.on(R.NAV_END,({toRoute:e})=>{e.url==="/"&&this.items.forEach(t=>{let r=t.element.querySelector("[data-intro]");r&&(r.style.color="")})}),S(window,"keydown",e=>{this.locked||((e.code==="ArrowRight"||e.code==="ArrowDown"||e.code==="Space")&&this.scrollTo(this.items[fe(this.items.indexOf(this.focusedItem)+1,this.items.length)],!1),(e.code==="ArrowLeft"||e.code==="ArrowUp")&&this.scrollTo(this.items[fe(this.items.indexOf(this.focusedItem)-1,this.items.length)],!1),e.code==="Enter"&&this.focusedItem&&this.router.to(this.focusedItem.project.url))}))}getScrollEvent(){let e=this.items[0].sides[0].height,t=this.getSpacing();return{scrollY:this.scroller.position.output.y,maxScroll:this.items.length*(e+t)}}checkRoute(e=!1,t=this.router.route.url){(t.startsWith("/about")||t.startsWith("/case/"))&&(this.fadeOut.value=1,this.hide(),this.lock())}createImage(e,t=!1,r={x:0,y:0}){let o=this.webgl.image({source:e.url,width:this.itemObservable.width,height:this.itemObservable.height,segments:30,vertex:Ci,fragment:Ti,uniforms:{progress:{value:0,type:b.FLOAT},mousePos:{value:this.mouseEmitter.glPosition,type:b.VEC2},backFace:{value:t?1:0,type:b.INT},offsetScale:{value:r,type:b.VEC2},fadeOut:this.fadeOutUniform,hide:{value:0,type:b.INT},screenSize:{type:b.VEC2,value:this.viewport.size},planeSize:{type:b.VEC2,value:this.getPlaneSize()},planeCenter:{type:b.VEC2,value:[this.webgl.clipSpaceX(this.itemObservable.width/2),this.webgl.clipSpaceY(this.itemObservable.height/2)]},imageSize:{type:b.VEC2,value:this.getImageSize(e)},curviness:{type:b.FLOAT,value:1},transition:{type:b.FLOAT,value:0},bendMult:{type:b.FLOAT,value:1},scaleProgress:{type:b.FLOAT,value:0},ripple:{type:b.FLOAT,value:0}}}),s=this.webgl.gl;return o.on(ct.BEFORE_DRAW,()=>s.enable(s.CULL_FACE)),o.on(ct.AFTER_DRAW,()=>s.disable(s.CULL_FACE)),o}getPlaneSize(){return[this.webgl.clipSpaceW(this.itemObservable.width),this.webgl.clipSpaceH(this.itemObservable.height)]}getPlaneCenter(e){return[this.webgl.clipSpaceX(e.x+this.itemObservable.width/2),this.webgl.clipSpaceY(e.y+this.itemObservable.height/2)]}getImageSize(e){return[this.webgl.clipSpaceW(e.width),this.webgl.clipSpaceH(e.height)]}getSpacing(){return this.viewport.height*.15}lock(e=!1){this.locked=!0,this.element.classList.add("is-locked"),this.scroller.detachBehavior("mouse"),this.scroller.detachBehavior("touch"),e&&this.lockRendering(!0)}isLocked(){return this.element.classList.contains("is-locked")}unlock(e=!0){this.locked=!1,this.element.classList.remove("is-locked"),this.scroller.attachBehavior("mouse"),this.scroller.attachBehavior("touch"),this.lockRendering(!e)}lockRendering(e=!0){this.renderingLocked=e}findItem(e){return this.items.find(({project:t})=>t.slug===e)}isHidden(){return this.hidden}hide(e=[]){this.hidden=e.length==0;for(let t of this.items){let r=e.includes(t),o=r?0:1;t.element.classList.toggle("is-hidden",!r);for(let s of t.sides)s.uniforms.hide.value=o}}show(){for(let e of this.items){e.element.classList.toggle("is-hidden",!1);for(let t of e.sides)t.uniforms.hide.value=0}}toggleUi(e=!0){this.element.classList.toggle("is-ui-disabled",!e)}getItemScrollY(e){let[t]=e.sides,r=t.height,o=this.scroller.position.output.y,s=this.viewport.height;return o+e.y-s*.5+r*.5}get scrollY(){return this.scroller.position.output.y}async scrollTo(e,t=!0){let[r]=e.sides,o=r.height,s=this.scroller.position.output.y,n=this.viewport.height,a=s+e.y-n*.5+o*.5,l=1.5;return new Promise(c=>{if(we(s,a-l,a+l))c();else{let u=this.scroller.onScroll(({y:d})=>{we(d,a-l,a+l)&&(c(),u())});this.scroller.scrollTo({y:a},t)}this.render()})}getItemPosition(e){let t=this.scroller.position.output.y,r=this.items.length,o=this.viewport.height,s=this.viewport.width,n=this.getSpacing(),a=this.getPlaneSize(),l=this.items[0]?.sides[0]?.height||0,c=r*(l+n),u=s*.5-this.itemObservable.width*.5,d=this.items.indexOf(e),[p]=e.sides,g=p.height+n,v=o*.5+g*.5+n*.5,w=fe(v-t+g*d,c)-g;return{x:u,y:w}}renderItemSide(e,t){t.translate({x:e.x+e.offsetPosition.x+e.scrollPosition.x,y:e.y+e.offsetPosition.y+e.scrollPosition.y}),t.scale({x:1+e.offsetScale.x,y:1+e.offsetScale.y})}render(e=!1){if(this.renderingLocked&&!e){for(let[d,p]of this.items.entries())for(let g of p.sides)this.renderItemSide(p,g);return}let t=this.scroller.position.output.y,r=this.items.length,o=this.viewport.height,s=this.viewport.width,n=this.getSpacing(),a=this.items[0]?.sides[0]?.height||0,l=r*(a+n),c=this.getPlaneSize(),u=s*.5-this.itemObservable.width*.5;for(let[d,p]of this.items.entries()){let[g]=p.sides,v=p.element,w=g.height+n,C=o*.5+w*.5+n*.5,j=fe(C-t+w*d,l)-w,se=j<-w||j>o+w,ne=N(j,o,-w+n,-1,1);if(p.x=u,p.y=j,v.style.setProperty("--progress",ne.toFixed(4)),v.style.setProperty("--translate-x",`${u}px`),v.style.setProperty("--translate-y",`${j}px`),v.style.setProperty("--center-y",`-150vh ${(50*ne).toFixed(4)}vh`),se&&!e){for(let $ of p.sides)$.disabled=!0;continue}let Z=this.getImageSize(p.project.image),be=this.getPlaneCenter(g);we(ne,-.3,.3)&&this.focusedItem!==p&&(this.focusedItem=p);for(let $ of p.sides)$.disabled=!1,$.uniforms.progress.value=ne,$.uniforms.planeSize.value=c,$.uniforms.planeCenter.value=be,$.uniforms.imageSize.value=Z,this.renderItemSide(p,$)}}};m([x(G,!0)],X.prototype,"webgl",2),m([x(Je,!0)],X.prototype,"mouseEmitter",2),m([x(_,!0)],X.prototype,"router",2),m([x(K,!0)],X.prototype,"preloader",2),m([x(ve,!0)],X.prototype,"viewport",2),m([q("projects",{type:Array})],X.prototype,"projects",2),m([I()],X.prototype,"composer",2),X=m([A("project-slider")],X)});var ce,Or=h(()=>{"use strict";z();le();M();ae();ge();xi();Rt();Xt();kt();bi();O();re();Et();Be();zt();te();V();ce=class{constructor(e){this.element=e;this.scroller=new Ae({element:{wrapper:document.documentElement,container:e}},{lerp:Ke({damping:.05}),mouse:ft(),scrollTo:Qe(),touch:Pt({enableMouseEvents:!0,velocityDamping:.035,velocityMultiplier:12})})}focusedItem;scroller;items=[];emitter=new F;itemObservable;entryAnimationDone=!1;resizeTimeout=-1;lastY=0;hidden=!1;scrolled=!1;router;preloader;viewport;projects;composer;getPosition(){return this.itemObservable.coord}async onCreate(){for(let e of this.projects){let t=`[data-project-item="${e.slug}"]`,r=this.element.querySelector(t),o=r.querySelector("[data-project-teaser]");this.itemObservable||(this.itemObservable=k(o,{resizeDetection:!0})),this.items.push({x:0,y:0,project:e,element:r,hrefElement:r.querySelector("a"),image:k(o.querySelector(":scope > div"),{resizeDetection:!0})})}this.preloader.done().then(()=>{this.composer.query(T,this.element).forEach(({component:e})=>{e.lock(!0).onEnter.seek(e.onEnter.duration,!0,!0)})}),this.checkRoute(),setTimeout(()=>{this.render(!0),this.scrollTo(this.items[this.items.length-1],!0),this.router.route.url==="/"&&this.entryAnimation()})}entryAnimation(){if(this.entryAnimationDone||this.router.route.url!=="/")return;this.items.forEach((o,s)=>{o.hrefElement.style.pointerEvents="none",(s==0||s===this.items.length-2)&&(o.element.style.opacity="1")});let e=!1,t=this.composer.query(T,this.router.view),r=this.scroller.onScroll(({y:o})=>{let s=-this.itemObservable.height,n=o>=s?N(o,s,0,0,1):N(o,s,s*2,0,1);n>=1&&(this.entryAnimationDone=!0,document.documentElement.classList.add("is-entry-done"),r(),t.forEach(({component:a})=>{a.override().lock()}),this.items.forEach(a=>{a.hrefElement.style.pointerEvents="",a.element.style.opacity=""})),t.forEach(({component:a})=>{e||(a.onEnter.reset().override(),a.onLeave.reset().override());let l=o>=s?a.onLeave:a.onEnter;if(l instanceof Ee){let c=l.items.length;l.items.forEach((u,d)=>{let p=u.controller;if(!p)return;let g=o>=s?p.duration*n*N(d,c-1,0,1,1.5)*.3:Math.max(p.duration-p.duration*n*N(d,c-1,0,2,2.5),0);p.seek(g,!0,!0)})}else{let c=l,u=o>=s?c.duration*n*1.5:c.duration-c.duration*n*2.5;l.stop(!0).seek(u,!0,!0)}}),e=!0})}async onListen(){return this.items.forEach(e=>{e.hrefElement.style.pointerEvents="none"}),E(...this.items.map(({element:e,hrefElement:t})=>E(S(e,["touchstart","mousedown"],r=>{r.preventDefault(),this.scrolled=!1}),S(e,["touchend","mouseup"],r=>{r.preventDefault(),this.scrolled||t.click()}))),this.scroller.onVirtual(({y:e})=>{Math.abs(this.lastY-e)>10&&(this.scrolled=!0,this.lastY=e)}),this.scroller.onScroll(()=>{this.render(),this.emitter.emit("scroll",this.getScrollEvent())}),this.router.on(R.NAV_START,e=>{e.fromRoute.url==="/"&&this.checkRoute(e.toRoute.url)}),this.router.on(R.BEFORE_LEAVE,e=>{this.checkRoute(e.toRoute.url)}),this.router.on(R.AFTER_ENTER,e=>{e.toRoute.url==="/"&&this.entryAnimation()}),this.viewport.onChange(()=>{clearTimeout(this.resizeTimeout),this.scrollTo(this.focusedItem,!0),this.resizeTimeout=setTimeout(()=>{this.scrollTo(this.focusedItem,!0)},100)}),S(window,"keydown",e=>{(e.code==="ArrowRight"||e.code==="ArrowDown"||e.code==="Space")&&this.scrollTo(this.items[fe(this.items.indexOf(this.focusedItem)+1,this.items.length)],!1),(e.code==="ArrowLeft"||e.code==="ArrowUp")&&this.scrollTo(this.items[fe(this.items.indexOf(this.focusedItem)-1,this.items.length)],!1),e.code==="Enter"&&this.focusedItem&&this.router.to(this.focusedItem.project.url)}))}checkRoute(e=this.router.route.url){e.startsWith("/about")||e.startsWith("/case/")?(this.hide(),this.lock(),this.toggleUi(!1)):(this.show(),this.unlock(),this.toggleUi(!0))}getSpacing(){return 0}lock(){this.element.classList.add("is-locked"),this.scroller.detachBehavior("mouse"),this.scroller.detachBehavior("touch")}getScrollEvent(){let e=this.itemObservable.height,t=this.getSpacing();return{scrollY:this.scroller.position.output.y,maxScroll:this.items.length*(e+t)}}isLocked(){return this.element.classList.contains("is-locked")}unlock(){this.element.classList.remove("is-locked"),this.scroller.attachBehavior("mouse"),this.scroller.attachBehavior("touch")}findItem(e){return this.items.find(({project:t})=>t.slug===e)}isHidden(){return this.hidden}hide(){for(let e of this.items)e.element.classList.toggle("is-hidden",!0)}show(){for(let e of this.items)e.element.classList.toggle("is-hidden",!1)}toggleUi(e=!0){this.element.classList.toggle("is-ui-disabled",!e)}async scrollTo(e,t=!0){let r=this.itemObservable.height,o=this.scroller.position.output.y,s=this.viewport.height,n=o+e.y-s*.5+r*.5,a=1.5;return new Promise(l=>{if(we(o,n-a,n+a))l();else{let c=this.scroller.onScroll(({y:u})=>{we(u,n-a,n+a)&&(l(),c())});this.scroller.scrollTo({y:n},t)}this.render()})}getItemPosition(e){let t=this.scroller.position.output.y,r=this.items.length,o=this.viewport.height,s=this.viewport.width,n=this.getSpacing(),a=this.itemObservable.height,l=r*(a+n),c=s*.5-this.itemObservable.width*.5,u=this.items.indexOf(e),d=e.element,p=this.itemObservable.height+n,g=o*.5+p*.5+n*.5,v=fe(g-t+p*u,l)-p,w=v<-p||v>o+p,C=N(v,o,-p+n,-1,1);return{x:c,y:v}}render(e=!1){let t=this.scroller.position.output.y,r=this.items.length,o=this.viewport.height,s=this.viewport.width,n=this.getSpacing(),a=this.itemObservable.height||0,l=r*(a+n),c=s*.5-this.itemObservable.width*.5;for(let[u,d]of this.items.entries()){let p=d.element,g=this.itemObservable.height+n,v=o*.5+g*.5+n*.5,w=fe(v-t+g*u,l)-g,C=N(w,o,-g+n,-1,1),j=`${(50*C).toFixed(4)}vh`;d.x=c,d.y=w,p.style.setProperty("--progress",C.toFixed(4)),p.style.setProperty("--translate-x",`${d.x}px`),p.style.setProperty("--translate-y",`${d.y}px`),p.style.setProperty("--center-y",`0% ${j}`),p.style.setProperty("--center-rot",`0% ${C<0?100:0}%`),p.style.setProperty("--center-text-y",`-150vh ${j}`),we(C,-.3,.3)&&this.focusedItem!==d&&(this.focusedItem=d)}}};m([x(_,!0)],ce.prototype,"router",2),m([x(K,!0)],ce.prototype,"preloader",2),m([x(ve,!0)],ce.prototype,"viewport",2),m([q("projects",{type:Array})],ce.prototype,"projects",2),m([I()],ce.prototype,"composer",2),ce=m([A("project-slider")],ce)});var Te,Ar=h(()=>{"use strict";z();M();ge();O();re();Be();zt();Ft();Or();Te=class{constructor(e){this.element=e}projectSlider;isCloseButton=!1;router;preloader;composer;onCreate(){let[e]=De()?this.composer.query(ce):this.composer.query(X);e&&(this.projectSlider=e.component,setTimeout(()=>this.handleScroll(this.projectSlider.getScrollEvent()))),this.preloader.done().then(()=>{this.element.classList.remove("is-disabled"),this.handleRoute(this.router.route)})}onListen(){return E(this.projectSlider?.emitter.on("scroll",e=>this.handleScroll(e)),this.router.on(R.NAV_START,({toRoute:e})=>this.handleRoute(e)),S(this.element,"click",()=>this.handleClick()),S(window,"keyup",e=>{e.key==="Escape"||e.key==="w"?this.router.to("/"):e.key==="a"&&this.router.to("/about/")}))}handleClick(){this.isCloseButton&&this.router.to("/")}handleRoute(e){this.isCloseButton=e.url.startsWith("/case/"),this.element.classList.toggle("is-close-button",this.isCloseButton),this.element.classList.toggle("is-disabled",e.url.startsWith("/about")),Ne(".home-link").forEach(t=>{t.classList.toggle("is-active",e.url==="/")}),Ne(".about-link").forEach(t=>{t.classList.toggle("is-active",e.url.startsWith("/about"))})}handleScroll({scrollY:e,maxScroll:t}){let r=fe(e,t)/t;this.element.style.setProperty("--progress",r.toFixed(4))}};m([x(_,!0)],Te.prototype,"router",2),m([x(K,!0)],Te.prototype,"preloader",2),m([I()],Te.prototype,"composer",2),Te=m([A("nav-control")],Te)});function Yo(i,e,t,r={}){let o=i.style.transform;i.style.transform="";let s=e.getBoundingClientRect(),n=i.getBoundingClientRect();t.x=s.x-n.x,t.y=s.y-n.y,r.alignRight&&(t.x+=s.width-n.width),i.style.transform=o.replace(/rotate(X|Y|Z|)\(.+?\)/,"")}function et(i,e,t={}){let r={x:0,y:0};e.style.visibility="hidden",e.style.visibility="hidden",Yo(e,i,r,t);let o=f.fromTo(e,r,{x:0,y:0,rotateX:0},{duration:2100,autoStart:!1,initSeek:!0,easing:y.easeOutExpo,...t,onStart:()=>{e.style.visibility="",e.style.visibility="",o.update().seek(0,!0,!0),requestAnimationFrame(()=>{Yo(e,i,r,t),o.update().seek(0,!0,!0)})}});return o}var _i=h(()=>{"use strict";V()});function Ln(){return new Promise((i,e)=>{document.readyState!=="loading"?document.fonts.ready.then(i):document.addEventListener("DOMContentLoaded",()=>{document.fonts.ready.then(i)})})}var he,Lr=h(()=>{"use strict";z();ti();V();re();Be();_i();zt();te();Ft();he=class{constructor(e){this.element=e}animations;progressBar;progressCounter;service;router;composer;onCreate(){this.element.classList.toggle("is-home",this.router.route.url==="/"),this.animations=this.composer.query(T,this.element).map(({component:r})=>r);let e=f.fromTo(this.progressBar,{scaleX:0},{scaleX:1},{initSeek:!0,autoStart:!1}),t=f.timeline({autoStart:!1,delay:300,onSeek:(r,o)=>{o>.75&&this.service.load(s=>{e.seek(s*e.duration),this.progressCounter.textContent=`PR.${Math.min(Math.ceil(s*7*1.1),7).toString().padStart(2,"0")}`})}}).add(this.composer.query(T,this.element).map(({component:r})=>r.override().lock().onEnter.reset()),{offset:-1});Ln().then(()=>{document.body.style.visibility="",De()?(this.service.load(()=>{}),this.service.resolve(),this.element.classList.add("is-done"),document.documentElement.classList.add("is-loaded")):Promise.all([this.service.loaded(),t.start()]).then(()=>{setTimeout(()=>this.done(),300)})})}done(){this.service.resolve(),this.element.classList.add("will-be-done");let e=this.router.route.url==="/";if(e){let[t]=this.composer.query(X),r=t.component,o=this.animations[0];if(r.focusedItem){let[{component:s}]=this.composer.query(T,r.focusedItem.element);s.lock().override(),s.onEnter.seek(s.onEnter.duration),et(o.element,s.element,{alignRight:!0,duration:1800,easing:y.easeInOutExpo}).start(),o.lock().onLeave.seek(o.onLeave.duration)}}Promise.all([f.to(this.progressBar,{scaleX:0},{duration:e?1500:1200,easing:e?y.easeInOutExpo:y.easeOutExpo}),...this.composer.query(T,this.element).filter((t,r)=>e?r>0:!0).map(({component:t})=>t.onLeave.start())]).then(()=>{this.element.classList.add("is-done"),document.documentElement.classList.add("is-loaded")})}};m([gt(".progress-bar")],he.prototype,"progressBar",2),m([gt(".progress-counter")],he.prototype,"progressCounter",2),m([x(K,!0)],he.prototype,"service",2),m([x(_,!0)],he.prototype,"router",2),m([I()],he.prototype,"composer",2),he=m([A("preloader")],he)});var tt,Rr=h(()=>{"use strict";z();V();te();tt=class extends T{lines=[];constructor(e){super(e);let t=this.element.dataset.textSlideLines;t&&(this.lines=Array.from(this.element.querySelectorAll(t))),this.onEnter=f.staggerFromTo(this.lines,{y:120},{y:0},{units:{y:"%"},easing:y.easeOutExpo,initSeek:!0,autoStart:!1,duration:1500,onStart:()=>this.onLeave.stop(),stagger:{offset:.05},timeline:{autoStart:!1,delay:parseFloat(this.element.dataset.textSlideDelay||"0")||0}}),this.onLeave=f.staggerFromTo(this.lines,{y:0},{y:-120},{units:{y:"%"},easing:y.easeOutExpo,autoStart:!1,duration:1200,timeline:{autoStart:!1}})}};tt=m([A("text-slide")],tt)});function ye(i){if(i.startsWith("rgb")){let s=i.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(s){let[,n,a,l]=s;return{r:parseInt(n),g:parseInt(a),b:parseInt(l)}}}i.startsWith("#")&&(i=i.substring(1)),i.length===3&&(i=i.split("").map(s=>s+s).join(""));let e=parseInt(i,16),t=e>>16&255,r=e>>8&255,o=e&255;return{r:t,g:r,b:o}}var $t=h(()=>{"use strict"});var Le,Gt=h(()=>{"use strict";z();le();$t();Le=class i extends W{get name(){return"theme"}get child(){return i}primary={r:0,g:0,b:0};secondary={r:0,g:0,b:0};emitter=new F;animEnabled=!1;constructor(){super(),this.set({primary:document.body.style.backgroundColor,secondary:document.body.style.color},!1)}set(e,t=!1){let r={r:0,g:0,b:0},o={r:0,g:0,b:0};if(typeof e.primary=="string"){if(e.primary.startsWith("#")){let s=ye(e.primary);if(s){let{r:n,g:a,b:l}=s;r.r=n,r.g=a,r.b=l}}else if(e.primary.startsWith("rgb")){let s=e.primary.replace("rgb(","").replace(")","").split(",").map(n=>parseInt(n.trim()));if(s.length===3){let[n,a,l]=s;r.r=n,r.g=a,r.b=l}}}else{let{r:s,g:n,b:a}=e.primary;r.r=s,r.g=n,r.b=a}if(typeof e.secondary=="string")if(e.secondary.startsWith("#")){let s=ye(e.secondary);if(s){let{r:n,g:a,b:l}=s;o.r=n,o.g=a,o.b=l}}else{let s=e.secondary.replace("rgb(","").replace(")","").split(",").map(n=>parseInt(n.trim()));if(s.length===3){let[n,a,l]=s;o.r=n,o.g=a,o.b=l}}else{let{r:s,g:n,b:a}=e.secondary;o.r=s,o.g=n,o.b=a}this.update(r,o,t)}update(e=this.primary,t=this.secondary,r=!1){this.toggleAnim(r),this.primary.r=e.r,this.primary.g=e.g,this.primary.b=e.b,this.secondary.r=t.r,this.secondary.g=t.g,this.secondary.b=t.b,this.updateVars(),this.emitter.emit("update",{primary:this.primary,secondary:this.secondary})}toggleAnim(e=!0){this.animEnabled!==e&&(this.animEnabled=e,e?document.body.style.transition="background-color 500ms ease-out":document.body.style.transition="")}updateVars(){let e=this.primary,t=this.secondary,r=`rgb(${e.r.toFixed(0)}, ${e.g.toFixed(0)}, ${e.b.toFixed(0)})`,o=`rgb(${t.r.toFixed(0)}, ${t.g.toFixed(0)}, ${t.b.toFixed(0)})`,s=document.querySelector("nav"),n=document.querySelector("[data-nav-control]"),a=document.querySelector("footer"),l=document.querySelector("[data-menu]");document.body.style.backgroundColor=r,l.style.backgroundColor=r,l.style.color=o,s.style.color=o,a.style.color=o,n.style.color=o}}});var ue,Oi=h(()=>{"use strict";z();Gt();Ft();ue=class{colors;theme;onCreate(){De()&&this.enable()}enable(e=!0){this.theme.set(this.colors,e)}};m([q("colors",{type:Object})],ue.prototype,"colors",2),m([x(Le)],ue.prototype,"theme",2),ue=m([A("theme")],ue)});var it,kr=h(()=>{"use strict";z();V();te();it=class extends T{onEnter=f.fromTo(this.element,{opacity:0},{opacity:1},{duration:1600,delay:parseFloat(this.element.dataset.triggerOpacityDelay||"0")||0,autoStart:!1,easing:y.easeOutSine});onLeave=f.fromTo(this.element,{opacity:1},{opacity:0},{autoStart:!1,duration:1e3,easing:y.easeOutExpo})};it=m([A("trigger-opacity")],it)});var rt,Pr=h(()=>{"use strict";z();te();V();rt=class extends T{onEnter=f.fromTo(this.element,{opacity:0,scaleX:.05},{scaleX:1,opacity:1},{duration:1e3,autoStart:!1,initSeek:!0,delay:parseFloat(this.element.dataset.triggerScaleDelay||"0")||0,easing:y.easeOutExpo});onLeave=f.fromTo(this.element,{opacity:1,scaleX:1},{scaleX:0,opacity:0},{autoStart:!1,duration:1e3,easing:y.easeOutExpo})};rt=m([A("trigger-scale")],rt)});var Mt,qo=h(()=>{"use strict";z();ae();Mt=class{constructor(e){this.element=e;this.observable=k(e,{visibilityDetection:!0})}observable;onListen(){return this.observable.onVisChange(()=>{this.observable.visible?this.element.play():this.element.pause()})}};Mt=m([A("video")],Mt)});var No={};Pi(No,{App:()=>qe});var qe,Uo=h(()=>{"use strict";z();ge();Ji();re();Et();tr();hr();ur();Ar();Lr();Or();Rr();Oi();kr();Pr();qo();Be();Gt();qe=class{router;tracker;composer;async onCreate(){let e=await this.router;(await this.tracker).enable(),e.animate(So({duration:150})),e.on(R.AFTER_LEAVE,()=>this.composer.update()),e.on(R.BEFORE_LEAVE,()=>window.scrollTo(0,0))}};m([x(_)],qe.prototype,"router",2),m([x(He)],qe.prototype,"tracker",2),m([I()],qe.prototype,"composer",2),qe=m([I({components:[ce,Se,tt,rt,Ye,Mt,Te,ue,Ze,he,it],services:[new _({routerConfig:{trigger:'a[href]:not([data-no-route]):not([target="_blank"]):not([target="blank"])'}}),new Le,new ve,new K,new He]})],qe);new qe});var Xo,Wo=h(()=>{Xo=`precision mediump float;precision mediump int;
#define GLSLIFY 1
uniform sampler2D image;uniform int fadeOutDir;uniform float time;uniform float alpha;uniform float fadeIn;uniform float fadeOut;uniform vec2 planeSize;uniform vec2 imageSize;varying vec2 vTexCoord;vec2 coverTexture(vec2 uv,vec2 imageSize,vec2 planeSize,bool fitHeight){float imgAsp=imageSize.x/imageSize.y;float plnAsp=planeSize.x/planeSize.y;bool match=imgAsp>plnAsp;if(fitHeight){match=imgAsp<plnAsp;}if(match){uv.x=uv.x*plnAsp/imgAsp+(1.-plnAsp/imgAsp)*0.5;}else{uv.y=uv.y*imgAsp/plnAsp+(1.-imgAsp/plnAsp)*0.5;}return uv;}void main(){vec2 texCoord=coverTexture(vTexCoord,imageSize,planeSize,false);vec4 color=texture2D(image,texCoord);gl_FragColor=color;}`});var Go,$o=h(()=>{Go=`precision mediump float;precision mediump int;
#define GLSLIFY 1
attribute vec4 vertCoord;attribute vec2 texCoord;uniform float fadeOut;uniform float time;uniform int foreground;uniform vec2 planeSize;uniform vec2 screenSize;uniform float scrollVelocity;uniform vec2 imageCurl;uniform mat4 modelViewMatrix;uniform int fadeOutDir;uniform mat4 projectionMatrix;varying vec2 vTexCoord;mat4 rotateMatrix_0(float angle,vec3 axis,vec3 origin){float c=cos(angle);float s=sin(angle);float t=1.0-c;vec3 normalizedAxis=normalize(axis);float x=normalizedAxis.x;float y=normalizedAxis.y;float z=normalizedAxis.z;mat4 translateToOrigin=mat4(1.0,0.0,0.0,-origin.x,0.0,1.0,0.0,-origin.y,0.0,0.0,1.0,-origin.z,0.0,0.0,0.0,1.0);mat4 rotationMatrix=mat4(t*x*x+c,t*x*y-s*z,t*x*z+s*y,0.0,t*x*y+s*z,t*y*y+c,t*y*z-s*x,0.0,t*x*z-s*y,t*y*z+s*x,t*z*z+c,0.0,0.0,0.0,0.0,1.0);mat4 translateBack=mat4(1.0,0.0,0.0,origin.x,0.0,1.0,0.0,origin.y,0.0,0.0,1.0,origin.z,0.0,0.0,0.0,1.0);return translateBack*rotationMatrix*translateToOrigin;}mat4 rotateMatrix_1(float angle,vec3 axis,vec3 origin){float c=cos(angle);float s=sin(angle);float t=1.0-c;vec3 normalizedAxis=normalize(axis);float x=normalizedAxis.x;float y=normalizedAxis.y;float z=normalizedAxis.z;mat4 translateToOrigin=mat4(1.0,0.0,0.0,-origin.x,0.0,1.0,0.0,-origin.y,0.0,0.0,1.0,-origin.z,0.0,0.0,0.0,1.0);mat4 rotationMatrix=mat4(t*x*x+c,t*x*y-s*z,t*x*z+s*y,0.0,t*x*y+s*z,t*y*y+c,t*y*z-s*x,0.0,t*x*z-s*y,t*y*z+s*x,t*z*z+c,0.0,0.0,0.0,0.0,1.0);mat4 translateBack=mat4(1.0,0.0,0.0,origin.x,0.0,1.0,0.0,origin.y,0.0,0.0,1.0,origin.z,0.0,0.0,0.0,1.0);return translateBack*rotationMatrix*translateToOrigin;}
#define M_PI 3.141592653589;
vec3 center_0(vec2 size){return vec3(-size.x*.5,size.y*.5,0.0);}vec4 bentPlane(vec4 coords,vec2 planeSize,float radius,float mixAmount,float rotation){vec4 bentCoords=coords;float angle=-planeSize.y*1.5+bentCoords.y*-M_PI;bentCoords.y=sin(angle)*radius-planeSize.y*.5;bentCoords.z=cos(angle)*radius;vec4 mixedCoords=mix(coords,bentCoords,mixAmount);mixedCoords*=rotateMatrix_1(radians(180.*rotation),vec3(1.0,0.0,0.0),center_0(planeSize));return mixedCoords;}vec3 center(vec2 size){return vec3(-size.x*.5,size.y*.5,0.0);}vec2 curlPlane(float x,float s,float r,float k,bool flip){float v1=flip ? s*k : s-s*k;float n1=s>0.0 ? 1.0 :-1.0;float t1=0.01;float e1=flip ? n1*v1 : n1*x;float e2=flip ? n1*x : n1*v1;if(r<=t1){return vec2(x,0.0);}if(e1<=e2){return vec2(x,0.0);}float r2=abs(s)/r;float hp=1.5707963;return vec2(v1/r2+cos(x/r2-hp-v1/r2),-sin(x/r2+hp-v1/r2)+1.0)*r2;}float mapRange(float value,float start1,float stop1,float start2,float stop2){return start2+(stop2-start2)*((value-start1)/(stop1-start1));}void main(){vTexCoord=texCoord;vec4 coords=vertCoord;vec2 curlTop=curlPlane(coords.y,-planeSize.y,5.-5.*imageCurl.x,1.0-imageCurl.x,true);coords.y=curlTop.x;coords.z+=curlTop.y;vec2 curlBot=curlPlane(coords.y,-planeSize.y,10.*imageCurl.y,1.0*imageCurl.y,false);coords.y=curlBot.x;coords.z+=curlBot.y;float fadeDirMod=fadeOutDir>=1 ? 1.0 :-1.0;vec2 fadeOutCurl=curlPlane(coords.y,-planeSize.y,5.0,1.0*fadeOut,fadeOutDir<=0 ? true : false);coords.y=fadeOutCurl.x;coords.z+=fadeOutCurl.y;coords*=rotateMatrix_0(radians(-120.*fadeDirMod*fadeOut*.2),vec3(1.0,0.0,0.0),vec3(-planeSize.x*.5,fadeOutDir<=0 ? planeSize.y : 0.0,0.0));coords.y+=fadeOut*abs(planeSize.y*.8)*fadeDirMod;gl_Position=projectionMatrix*modelViewMatrix*coords;}`});var P,Re=h(()=>{"use strict";z();ge();xi();O();re();Ge();Be();zt();M();le();P=class extends F{constructor(t){super();this.element=t}scroller;container;available=!1;slider;resolver=new pe;name;webgl;preloader;router;composer;onCreate(){this.container=this.webgl.container({name:this.name,fov:this.webgl.vp.fov}),this.scroller=Fo({element:{container:ee("main"),wrapper:this.element}},{lerp:{damping:.08},mouse:{multiplier:1.8},touch:{enableMouseEvents:!0,deltaMultiplier:2}}),this.lockInteraction(!0),this.preloader.done().then(()=>{this.checkAvailable(this.router.view),this.lockInteraction(!1)});let[t]=this.composer.query(X);this.slider=t?.component,this.resolver.resolve()}get ready(){return this.resolver.promise}get position(){return this.scroller.position.output}get instance(){return this.scroller}lockInteraction(t=!0){t?(this.scroller.detachBehavior("mouseWheel"),this.scroller.detachBehavior("touchInertia"),this.emit("lock",!0)):(this.scroller.attachBehavior("mouseWheel"),this.scroller.attachBehavior("touchInertia"),this.emit("lock",!1))}scrollTo(t,r=!1){return this.scroller.unlock(),this.scroller.scrollTo({y:t},r)}checkAvailable(t){let r=this.available;this.available=t.contains(this.element),this.scroller.lock("available",!this.available),this.lockInteraction(!this.available),this.available!==r&&this.scroller.scrollTo({y:0},!0)}onListen(){return E(this.router.on(R.BEFORE_ENTER,({toElement:t})=>{this.checkAvailable(t)}),this.scroller.onScroll(t=>{this.available&&(this.slider&&this.slider.focusedItem&&this.slider.focusedItem.uniforms.transition>0&&(this.slider.focusedItem.scrollPosition.y=t.y*-1),this.container.scrollTo(t))}))}onDestroy(){this.scroller.destroy(),this.webgl.vp.removeContainer(this.container)}};m([q("name")],P.prototype,"name",2),m([x(G,!0)],P.prototype,"webgl",2),m([x(K,!0)],P.prototype,"preloader",2),m([x(_,!0)],P.prototype,"router",2),m([I()],P.prototype,"composer",2),P=m([A("smooth-scroll")],P)});var zr,D,pt=h(()=>{"use strict";z();M();ae();We();V();O();mt();re();Ge();Wo();$o();Re();te();zr=class{constructor(e,t=.1){this._target=e;this.mod=t}set(e){for(let t in e)e.hasOwnProperty(t)&&(this._target[t]=e[t])}update(e,t=1){for(let r in e)e.hasOwnProperty(r)&&(this._target[r]=me(this._target[r],e[r],this.mod*t))}get target(){return this._target}},D=class extends T{fadeOutState={type:b.FLOAT,value:0};currentScrollY=0;preventImageCurl=!1;mesh;observable;alpha=1;culling=!0;scrollVelocity={type:b.FLOAT,value:0};imageCurl=new zr({x:0,y:0},.03);hidden=!1;meshLeft=!1;lastScrollY=0;scroller;size;visibilityAnimation=!1;foreground=!1;noCurl=!1;containerName="";webgl;router;composer;constructor(e){super(e),this.observable=k(e,{resizeDetection:!0,visibilityDetection:!0})}get segments(){return 50}get vertex(){return Go}get fragment(){return Xo}get uniforms(){return{imageCurl:{type:b.VEC2,value:this.noCurl?[1,0]:this.imageCurl.target},fadeOutDir:{type:b.INT,value:1},planeSize:{type:b.VEC2,value:this.getPlaneSize()},imageSize:{type:b.VEC2,value:[this.size.width||this.observable.width,this.size.height||this.observable.height]},screenSize:{type:b.VEC2,value:[this.webgl.clipSpaceW(this.viewport.size.width),this.webgl.clipSpaceH(this.viewport.size.height)]},scrollVelocity:this.scrollVelocity,alpha:{type:b.FLOAT,value:this.alpha},fadeOut:this.fadeOutState,foreground:{type:b.INT,value:this.foreground?1:0}}}onEnter=f.fromTo(this.fadeOutState,{value:1},{value:0},{duration:2e3,easing:y.easeOutExpo,onStart:()=>{this.meshLeft=!1,this.onLeave.stop()}});onLeave=f.fromTo(this.fadeOutState,{value:0},{value:1},{duration:1300,easing:y.easeOutExpo,onStart:()=>{let e=this.observable.y+this.observable.height*.5<this.currentScrollY+this.viewport.height*.5;this.mesh.uniforms.fadeOutDir.value=e?1:-1,this.onEnter.stop()},onComplete:()=>{this.meshLeft=!0}});createMesh(){return this.webgl.plane({element:this.element})}onCreate(){super.onCreate();let[e]=this.composer.query(P).filter(({component:t})=>t.name===this.containerName);this.scroller=e?.component,this.mesh=this.createMesh(),this.foreground&&(this.mesh.model[14]=.001),this.preloader.done().then(()=>{this.fadeOutState.value=0}),this.noCurl||U.main.add(t=>{let r=(this.currentScrollY-this.lastScrollY)/40,o=Math.min(Math.abs(r),1),s=.005*t;this.scrollVelocity.value=me(this.scrollVelocity.value,o,s),this.lastScrollY=this.currentScrollY,this.disabled||this.updateCurl(t*.06)})}isHidden(){return this.hidden}hide(){this.hidden=!0}show(){this.hidden=!1}get disabled(){return this.hidden||this.culling&&this.meshLeft||this.culling&&!this.observable.visible}isLoaded(){return Promise.resolve()}updateCurl(e=1,t=!0){if(this.preventImageCurl)return;this.observable.update();let r=this.currentScrollY,o=this.observable.height,s=this.observable.y,n=this.viewport.height,a=xe((r-s+n*.8)/(o*.5),0,1),l=xe((r-s-o*.3)/(o*.5),0,1);t?this.imageCurl.update({x:a,y:l},e):(this.imageCurl.target.x=a,this.imageCurl.target.y=l)}beforeRender(){}onListen(){let e=this.mesh.uniforms;return E(this.scroller?.instance?.onVirtual(({y:t})=>{this.currentScrollY=t}),this.scroller?.on("lock",t=>{t||(this.lastScrollY=0,this.currentScrollY=0,this.updateCurl(1,!1))}),this.webgl.on(ut.BEFORE_RENDER,()=>{if(this.mesh.disabled=this.disabled,this.mesh.disabled)return;let t=this.getPlaneSize(),r=this.webgl.clipSpaceH(this.viewport.size.height),o=this.webgl.clipSpaceW(this.viewport.size.width);e.planeSize.value[0]=t[0],e.planeSize.value[1]=t[1],e.screenSize.value[0]=o,e.screenSize.value[1]=r,this.beforeRender()}))}getPlaneSize(){return[this.webgl.clipSpaceW(this.observable.width),this.webgl.clipSpaceH(this.observable.height)]}async onDestroy(){Oe(this.observable),this.webgl.remove(this.mesh)}};m([q("size",{type:Object})],D.prototype,"size",2),m([q("fade-in",{type:Boolean})],D.prototype,"visibilityAnimation",2),m([q("fg",{type:Boolean})],D.prototype,"foreground",2),m([q("no-curl",{type:Boolean})],D.prototype,"noCurl",2),m([q("container")],D.prototype,"containerName",2),m([x(G,!0)],D.prototype,"webgl",2),m([x(_,!0)],D.prototype,"router",2),m([I()],D.prototype,"composer",2),D=m([A("media-webgl")],D)});var B,Zt=h(()=>{"use strict";z();ti();M();ae();ge();V();O();mt();re();Ge();Gt();Tr();Cr();$t();Re();te();B=class extends T{images=[];scroller;observable;wrapper;themeTl;available=!1;active=!1;theme;imageUrl;width=0;colors;height=0;container="";url="";imageTarget;nextTitle;webgl;router;composer;constructor(e){super(e),this.observable=k(e,{resizeDetection:!0,visibilityDetection:!0}),this.wrapper=k(ee(".image-wrapper",this.element),{resizeDetection:!0})}recalc(){return super.recalc(),this.observable.update(),this}async onCreate(){this.scroller=this.composer.query(P).map(o=>o.component).find(o=>o.name==this.container),await this.scroller.ready,this.checkAvailable(this.router.view);let e=ye(this.colors.primary),t=ye(this.colors.secondary);this.images=[this.createSide(),this.createSide(!0)],this.themeTl=f.timeline({autoStart:!1,onSeek:()=>{this.theme.toggleAnim(!1),this.theme.updateVars();let o=this.theme.secondary;this.element.style.color=`rgb(${o.r}, ${o.g}, ${o.b})`}}).add([f.to(this.theme.primary,e),f.to(this.theme.secondary,t)]).override();let r={duration:1e3,easing:y.easeOutExpo};this.onEnter=f.timeline({autoStart:!1}).add([...this.images.map(o=>f.to(o.uniforms.fadeOut,{value:0},r))]),this.onLeave=f.timeline({autoStart:!1,onReset:()=>{this.active=!1,this.themeTl.reset()},onStart:()=>{let o=this.scroller.position.y+this.viewport.height*.5;this.images.map(s=>{s.uniforms.fadeOutDir.value=o>this.observable.y?0:-1})}}).add([...this.images.map(o=>[f.to(o.uniforms.transition,{value:0},r),f.to(o.uniforms.curviness,{value:0},r),f.fromTo(o.uniforms.fadeOut,{value:0},{value:1},r)]).flat()])}checkAvailable(e){this.available=e.contains(this.element)}async onListen(){let e=this.webgl.gl;return E(this.theme.emitter.on("update",()=>{for(let t of this.themeTl.items)t.controller instanceof lt&&t.controller.update()}),this.webgl.on(ut.BEFORE_RENDER,()=>{for(let t of this.images)t.disabled=!this.observable.visible}),this.router.on(R.BEFORE_ENTER,({toElement:t})=>{this.checkAvailable(t)}),this.scroller.instance.onScroll(({y:t})=>{if(!this.observable.visible||!this.available)return;this.element.style.visibility="";let r=this.viewport.height,o=xe(N(t,this.observable.y-r*.5,this.observable.y,0,1),0,1);this.nextTitle.ref.style.transform=`translate3d(0, ${-r*.3*(1-o)}px, 0)`,this.composer.query(T,this.nextTitle.ref).forEach(({component:c})=>{c.onEnter.complete&&c.onEnter.reset(),c.lock().onEnter.seek(c.onEnter.duration*o,!0,!0)}),this.themeTl.seek(o*this.themeTl.duration);let s=this.wrapper.width/this.imageTarget.width-1,n=this.viewport.height/this.imageTarget.height-1,a=this.observable.y,l=a+this.observable.height*.5;for(let c of this.images)c.scale({x:1+s*o,y:1+n*o}),c.uniforms.fadeOut.value=0,c.uniforms.hide.value=0,c.uniforms.offsetScale.value[0]=s*o,c.uniforms.offsetScale.value[1]=n*o,c.uniforms.transition.value=o,c.uniforms.grayscale.value=xe(N(t+r,a,l,1,0),0,1);o>=1&&!this.active&&this.observable.visible&&(this.active=!0,this.scroller.lockInteraction(),this.scroller.instance.lock(),this.router.to(this.url,{flags:{next:!0}}))}),...this.images.map(t=>(t.setScaleOrigin({x:.5,y:0}),E(t.on(ct.BEFORE_DRAW,()=>{e.enable(e.CULL_FACE),t.uniforms.planeSize.value=this.getPlaneSize(),t.uniforms.planeCenter.value=this.getPlaneCenter(),t.uniforms.imageSize.value=this.getImageSize()}),t.on(ct.AFTER_DRAW,()=>e.disable(e.CULL_FACE))))))}hide(){this.images.forEach(e=>e.uniforms.hide.value=1),this.element.style.visibility="hidden"}createSide(e=!1){return this.webgl.image({segments:50,container:this.container,autoLoad:!0,visibleLoad:!1,elementCulling:!1,source:this.imageUrl,element:this.imageTarget.ref,vertex:Ci,fragment:Ti,uniforms:{progress:{value:0,type:b.FLOAT},backFace:{value:e?1:0,type:b.INT},scrolling:{value:1,type:b.INT},hide:{value:0,type:b.INT},offsetScale:{value:[0,0],type:b.VEC2},screenSize:{type:b.VEC2,value:this.viewport.size},curviness:{type:b.FLOAT,value:0},transition:{type:b.FLOAT,value:0},grayscale:{type:b.FLOAT,value:0},bendMult:{type:b.FLOAT,value:1},planeSize:{type:b.VEC2,value:this.getPlaneSize()},planeCenter:{type:b.VEC2,value:this.getPlaneCenter()},imageSize:{type:b.VEC2,value:this.getImageSize()},fadeOut:{type:b.FLOAT,value:0},fadeOutDir:{type:b.INT,value:0}}})}getPlaneCenter(){return[this.webgl.clipSpaceX(this.imageTarget.width/2),this.webgl.clipSpaceY(this.imageTarget.height/2)]}getPlaneSize(){return[this.webgl.clipSpaceW(this.imageTarget.width),this.webgl.clipSpaceH(this.imageTarget.height)]}getImageSize(){return[this.webgl.clipSpaceW(this.width),this.webgl.clipSpaceH(this.height)]}onDestroy(){this.images.forEach(e=>{this.webgl.remove(e)})}};m([x(Le)],B.prototype,"theme",2),m([q("image")],B.prototype,"imageUrl",2),m([q("width",{type:Number})],B.prototype,"width",2),m([q("theme",{parse:JSON.parse})],B.prototype,"colors",2),m([q("height",{type:Number})],B.prototype,"height",2),m([q("container")],B.prototype,"container",2),m([q("url")],B.prototype,"url",2),m([gt(".image-target",{parse:i=>k(i,{resizeDetection:!0})})],B.prototype,"imageTarget",2),m([gt(".next-title",{parse:i=>k(i,{resizeDetection:!0})})],B.prototype,"nextTitle",2),m([x(G,!0)],B.prototype,"webgl",2),m([x(_,!0)],B.prototype,"router",2),m([I()],B.prototype,"composer",2),B=m([A("next-project")],B)});function Q(i,e,t,r){let o=r.startsWith("!"),s=t.startsWith("!");r=r.replace(/^\!/,""),t=t.replace(/^\!/,"");let n=o?e.url===r:e.url.startsWith(r),a=s?i.url===t:i.url.startsWith(t);return n&&a}function J({composer:i},e,t=!0){i.update(e,!1,r=>r===ue),i.query(ue,e).forEach(({component:r})=>r.enable(t))}function It({composer:i,slider:e},t){let r=e.focusedItem;return e.isHidden()?f.noop():(r&&(e.scrollTo(r,!0),r.uniforms.transition=0,r.uniforms.curviness=1),f.timeline().add([...r?[f.to(r.offsetScale,{x:0,y:0},{duration:1500,easing:y.easeOutExpo}),f.to(r.offsetPosition,{x:0,y:0},{duration:1500,easing:y.easeOutExpo})]:[],f.to(e.fadeOut,{value:1},{duration:1500,easing:y.easeOutExpo,onStart:()=>{e.lock(),e.hide(r?[r]:[])},onComplete:()=>{e.hide(),e.unlock()}}),...i.query(T,e.element).map(({component:o})=>o.onLeave)]))}function Ai({composer:i,slider:e},t){let r=t||e.focusedItem;return r&&e.scrollTo(r,!0),e.fadeOut.value=1,e.toggleUi(!0),e.hide(r?[r]:[]),e.lock(),e.items.forEach(o=>{o.scrollPosition.x=0,o.scrollPosition.y=0,o.offsetPosition.x=0,o.offsetPosition.y=0,o.offsetScale.x=0,o.offsetScale.y=0,o.uniforms.scaleProgress=0,o.uniforms.transition=0,o.uniforms.curviness=1}),f.timeline().add([...r?[f.to(r.offsetScale,{x:0,y:0},{duration:1500,easing:y.easeOutExpo}),f.to(r.offsetPosition,{x:0,y:0},{duration:1500,easing:y.easeOutExpo})]:[],f.to(e.fadeOut,{value:0},{duration:1500,easing:y.easeOutExpo}),...i.query(T,e.element).map(({component:o})=>o.lock(!1).onEnter)]).call(()=>{e.unlock(),e.show()},{offset:-.75})}function ke({composer:i},e,t=()=>!0){i.update(e,!1);let r=i.query(T,e);return r.forEach(({component:o})=>o.lock(!1)),f.timeline({onStart:()=>{i.query(P,e).forEach(({component:o})=>{o.scrollTo(0,!0)}),i.query(B,e).forEach(({component:o})=>{o.onLeave.stop().reset()}),i.query(D,e).forEach(({component:o})=>{o.onEnter.reset().stop()})}}).add([...r.filter(({component:o,element:s})=>t(o,s)&&(o.isInEntry()||o instanceof D)).map(({component:o})=>o.onEnter)])}function Pe({composer:i},e){return f.timeline().add([...i.query(T,e).map(({component:t})=>(t.lock().onEnter.stop(),t.onLeave))])}function Ri(i,e,t,r){let o=r.getItemPosition(e);return t.position.x=i.x-o.x,t.position.y=i.y-o.y,t.scale.x=i.width/e.sides[0].width-1,t.scale.y=i.height/e.sides[1].height-1,t.curviness=0,t.transition=1,t}function Kt(i){return{headline:ee(".h1",i),subline:ee(".h4",i),intro:ee("[data-intro]",i),teaser:k(ee("[data-project-detail-teaser]",i))}}function Mr(i){return{headline:ee(".h1",i.element),intro:ee("[data-intro]",i.element),subline:ee(".h4",i.element)}}function Qt(i,e){return{item:Mr(i),case:Kt(e)}}function ot(i,e){let t=e.parentElement,[r]=i.update(t,!1,o=>o===D);if(!r){let[o]=i.query(D,t);return o?.component}return r.component}function Zo(i){return i.replace("/case/","").replace(/\/$/,"")}function Ko(i,e){i.update(e,!1,t=>t.prototype instanceof T)}var Li,ze=h(()=>{"use strict";ae();V();O();pt();Oi();te();Re();Zt();Li={position:{x:0,y:0},scale:{x:0,y:0},curviness:0,transition:0}});var Qo,Jo=h(()=>{"use strict";V();ze();Qo=i=>({name:"aboutToCase",when:({fromRoute:e,toRoute:t})=>Q(e,t,"/about","/case/"),enter:({toElement:e,fromElement:t})=>{let r=Kt(e),o=ot(i.composer,r.teaser.ref);return document.body.appendChild(e),f.timeline({onStart:()=>{o.show(),J(i,e)}}).add([Pe(i,t),It(i,t)]).add([ke(i,e),f.to(r.headline,{x:0,y:0},{duration:1500,easing:y.easeOutExpo}),f.to(r.subline,{x:0,y:0},{duration:1500,easing:y.easeOutExpo})],{offset:-.9})}})});var es,ts=h(()=>{"use strict";V();ze();Re();es=i=>{let{composer:e}=i;return{name:"aboutToHome",when:({fromRoute:t,toRoute:r})=>Q(t,r,"/about","!/"),enter:({toElement:t,fromElement:r})=>{let o=i.slider.focusedItem,s;return o&&(s=Mr(o)),e.query(P,r).forEach(({component:n})=>n.lockInteraction()),f.timeline({onStart:()=>J(i,t)}).add(Pe(i,r)).add([Ai(i),...s?[f.to(s.headline,{x:0,y:0},{duration:1500,easing:y.easeOutExpo}),f.to(s.subline,{x:0,y:0},{duration:1500,easing:y.easeOutExpo})]:[]],{offset:-1})}}}});var is,rs=h(()=>{"use strict";V();Re();ze();is=i=>{let{slider:e,composer:t}=i,r,o;return{name:"caseContentToHome",when:({fromRoute:s,fromElement:n,toRoute:a})=>{let[l]=t.query(P,n);return(l?.component.position.y||0)>=window.innerHeight&&Q(s,a,"/case/","!/")},enter:({fromElement:s,toElement:n,fromRoute:a})=>{let l=e.findItem(a.url.replace("/case/",""));return f.timeline({onStart:()=>J(i,n)}).add(Pe(i,s)).add(Ai(i,l),{offset:-1})}}}});var os,ss=h(()=>{"use strict";V();te();_i();ze();Re();$t();os=i=>{let{slider:e,composer:t}=i,r={duration:1500,easing:y.easeOutExpo},o,s;return{name:"caseHeaderToHome",when:({fromRoute:n,fromElement:a,toRoute:l})=>{let[c]=t.query(P,a);return(c?.component.position.y||0)<window.innerHeight&&Q(n,l,"/case/","!/")},start:({fromRoute:n,fromElement:a})=>{o=e.findItem(Zo(n.url)),s={position:{x:0,y:0},scale:{x:0,y:0}};let l=Qt(o,a);l.item.headline.style.visibility="hidden",l.item.subline.style.visibility="hidden",e.items.forEach(c=>{c!==o&&(c.scrollPosition.x=0,c.scrollPosition.y=0,c.offsetPosition.x=0,c.offsetPosition.y=0,c.offsetScale.x=0,c.offsetScale.y=0,c.uniforms.transition=0,c.uniforms.scaleProgress=0,c.uniforms.ripple=0,c.uniforms.curviness=1)}),e.lock(),e.scrollTo(o,!0)},enter:({fromElement:n,toElement:a})=>{let l=Qt(o,n),c=ot(t,l.case.teaser.ref),u=ye(l.item.intro.dataset.intro),d=ye(l.case.intro.dataset.intro),p=[et(l.case.headline,l.item.headline,r),et(l.case.subline,l.item.subline,r),f.to(d,u,{duration:1e3,easing:y.easeOutExpo,onUpdate:({r:w,g:C,b:j})=>{l.item.intro.style.color=`rgb(${w}, ${C}, ${j})`}})];if(!c.isHidden()){let w=Ri(l.case.teaser,o,{...Li},e);o.offsetScale.x=w.scale.x,o.offsetScale.y=w.scale.x,o.offsetPosition.x=w.position.x,o.offsetPosition.y=w.position.y,o.uniforms.transition=1}o.uniforms.scaleProgress=0,o.uniforms.ripple=0;let[g]=t.query(P,n),v=g?.component;return f.timeline({onComplete:()=>e.toggleUi(!0),onStart:()=>{e.hide([o]),c?.hide(),e.toggleUi(!0),J(i,a),e.fadeOut.value=0,l.case.headline.style.visibility="hidden",l.case.subline.style.visibility="hidden",t.query(T,o.element).map(({component:w})=>w.onLeave.reset())}}).add([...v?[f.to(v.position,{y:0},{onStart:()=>v.lockInteraction(),onUpdate:({y:w})=>v.scrollTo(w,!0),duration:500})]:[],...p,f.to(o.uniforms,{transition:0,curviness:1},r),f.to(o.scrollPosition,{x:0,y:0},r),f.to(o.offsetPosition,s.position,r),f.to(o.offsetScale,s.scale,r),...t.query(T,n).filter(({component:w})=>w.isVisible()||w.isInEntry()).filter(({component:w})=>w.onEnter.progress>.05).map(({component:w})=>w.lock(!1).onLeave)]).call(()=>{e.items.forEach(w=>{t.query(T,w.element).forEach(({component:C})=>{C.reset().onEnter.seek(C.onEnter.duration)})}),e.show(),e.unlock()},{offset:-1})}}}});var ns,as=h(()=>{"use strict";V();ze();ns=i=>({name:"caseToAbout",when:({fromRoute:e,toRoute:t})=>Q(e,t,"/case/","/about"),enter:({toElement:e,fromElement:t})=>f.timeline({onStart:()=>J(i,e)}).add([Pe(i,t),It(i,t)]).add(ke(i,e),{offset:-.9})})});var ls,cs=h(()=>{"use strict";V();pt();te();ze();ls=i=>{let{composer:e,slider:t}=i;return{name:"caseToCase",when:({fromRoute:r,toRoute:o,flags:s})=>!s.next&&Q(r,o,"/case/","/case/"),enter:({toElement:r,fromElement:o})=>(t.hide(),f.timeline({onStart:()=>{J(i,r),e.query(D,r).forEach(({component:s})=>{s.onEnter.stop().reset().seek(0,!0,!0)}),e.query(T,r).forEach(({component:s})=>{s.onEnter.stop().reset().seek(0,!0,!0)})}}).add(Pe(i,o)).add(ke(i,r),{offset:-.8}))}}});var hs,us=h(()=>{"use strict";V();Zt();Re();te();ze();pt();hs=i=>{let{composer:e,slider:t}=i;return{name:"caseToCaseNext",when:({fromRoute:r,toRoute:o,flags:s})=>s.next&&Q(r,o,"/case/","/case/"),enter:({toElement:r,fromElement:o})=>{let s=Kt(r),n=ot(e,s.teaser.ref);return f.timeline({onStart:()=>{let[a]=e.query(P,r).map(({component:l})=>l);t.hide(),a.ready.then(()=>{a.lockInteraction(),a.scrollTo(0,!0)}),n.lock().onEnter.reset().seek(n.onEnter.duration),J(i,r,!1),setTimeout(()=>{let l=e.query(D,r);n.show(),n.lock().onEnter.reset().seek(n.onEnter.duration),e.query(T,r).filter(({element:c})=>c.classList.contains("title-anim")).forEach(({component:c,element:u})=>{c.element.style.visibility="",c.onLeave.reset(),f.setNow(u,{x:0,y:0}),c.lock().onEnter.reset().seek(c.onEnter.duration)}),setTimeout(()=>{l.forEach(({component:c})=>c.onLeave.reset()),setTimeout(()=>{l.forEach(({component:c})=>{c.onEnter.stop().seek(c.onEnter.duration,!0)})},100)}),setTimeout(()=>{e.query(B,o).forEach(({component:c})=>c.hide()),a.lockInteraction(!1)},50)},5)}}).add([ke(i,r,(a,l)=>a!==n&&!l.classList.contains("title-anim"))])}}}});var ms,fs=h(()=>{"use strict";V();ze();ms=i=>({name:"homeToAbout",when:({fromRoute:e,toRoute:t})=>Q(e,t,"!/","/about"),enter:({toElement:e})=>f.timeline({onStart:()=>J(i,e)}).add(It(i)).add(ke(i,e),{offset:-.9})})});var ps,ds=h(()=>{"use strict";ae();V();pt();Zt();Re();te();_i();ze();$t();O();ps=i=>{let{slider:e,composer:t}=i,r={duration:1e3,easing:y.easeOutCirc},o;return{name:"homeToCase",when:({fromRoute:s,toRoute:n})=>Q(s,n,"!/","/case/"),start:({toRoute:s})=>{o=e.findItem(s.url.replace("/case/","").replace(/\/$/,""));let n=e.scrollY,a=e.getItemScrollY(o),l=Math.abs(n-a);return e.lock(),f.to({y:n},{y:a},{duration:300*xe(N(l,0,200,0,1),.01,1),easing:y.easeOutSine,onComplete:()=>e.hide([o]),onUpdate:({y:c})=>e.scroller.scrollTo({y:c},!0)})},enter:({toElement:s,trigger:n})=>{let a={...Li},l=Qt(o,s),c=ot(t,l.case.teaser.ref),u=ye(l.case.intro.dataset.intro),d=ye(l.item.intro.dataset.intro),p=[et(l.item.headline,l.case.headline,{duration:1e3}),et(l.item.subline,l.case.subline,{duration:1e3,delay:100}),f.to(d,u,{duration:1e3,easing:y.easeOutExpo,onUpdate:({r:C,g:j,b:se})=>{l.case.intro.style.color=`rgb(${C}, ${j}, ${se})`}})];f.setNow(l.case.headline,{x:0,y:0}),f.setNow(l.case.subline,{x:0,y:0}),c?.hide(),Ko(t,s),Ri(l.case.teaser,o,a,e);let[g]=t.query(P,s),v=g?.component,w=t.query(D,s);return v&&v.ready.then(()=>{v.scrollTo(0,!0),w.forEach(({component:C})=>C.onLeave.reset()),setTimeout(()=>{w.forEach(({component:C})=>{C.onEnter.stop().seek(C.onEnter.duration,!0)})},100)}),f.timeline({onComplete:()=>{o.offsetScale.x=o.offsetScale.y=0,e.lock(!0)},onStart:()=>{t.query(T,s).forEach(({component:C,element:j})=>{C instanceof B&&(C.reset().update().onLeave.stop().reset(),C.onEnter.stop().reset()),C.isInEntry()?(C.onEnter.reset(),C.lock(),requestAnimationFrame(()=>{Object.values(l.case).map(ne=>ne instanceof Bt?ne.ref:ne).includes(j)&&C.onEnter.seek(C.onEnter.duration)})):C.reset().lock(!1)})}}).add(n=="user"?f.fromTo(o.uniforms,{ripple:0},{ripple:1},{duration:800,easing:y.easeOutQuart}):[]).to(o.uniforms,{transition:1,curviness:0},{duration:800,easing:y.easeOutSine,offset:-.6}).to(e.fadeOut,{value:0},{...r,offset:-1}).add(f.to(o.uniforms,{scaleProgress:1},{delay:0,easing:y.easeInOutExpo,duration:900}),{offset:-.7}).add([f.to(o.offsetScale,a.scale,{easing:y.easeInOutExpo,duration:1e3,onComplete:()=>{v.lockInteraction(!1)}}),f.to(o.offsetPosition,a.position,{easing:y.easeInOutExpo,duration:1e3})],{offset:-1}).call(()=>{e.toggleUi(!1),J(i,s)},{offset:-.85}).add(p,{offset:-.85}).call(()=>{c?.show(),requestAnimationFrame(()=>{e.hide()})},{offset:-.1}).add(t.query(T,s).filter(({component:C})=>C.isInEntry()).map(({component:C})=>C.lock(!1).onEnter),{offset:-.9})}}}});var st,Ir=h(()=>{"use strict";z();pt();st=class extends D{onCreate(){super.onCreate()}createMesh(){return this.webgl.image({segments:this.segments,autoLoad:!0,visibleLoad:!1,container:this.containerName,source:this.element.querySelector("img").src,elementCulling:!1,element:this.element,vertex:this.vertex,fragment:this.fragment,uniforms:this.uniforms})}getPlaneSize(){return[this.webgl.clipSpaceW(this.observable.width),this.webgl.clipSpaceH(this.observable.height)]}beforeRender(){let e=this.mesh.imageSize;this.mesh.uniforms.imageSize.value[0]=e.width,this.mesh.uniforms.imageSize.value[1]=e.height}isLoaded(){return this.mesh?this.mesh.loaded:new Promise((e,t)=>{setTimeout(()=>this.mesh.loaded.then(e,t))})}};st=m([A("image-webgl")],st)});var vs,gs=h(()=>{vs=`precision mediump float;
#define GLSLIFY 1
uniform sampler2D image;uniform sampler2D image1;uniform float time;uniform float alpha;uniform float fadeIn;uniform float emerge;uniform vec2 planeSize;uniform vec2 imageSize;uniform vec2 mousePos;varying vec2 vTexCoord;vec2 coverTexture(vec2 uv,vec2 imageSize,vec2 planeSize,bool fitHeight){float imgAsp=imageSize.x/imageSize.y;float plnAsp=planeSize.x/planeSize.y;bool match=imgAsp>plnAsp;if(fitHeight){match=imgAsp<plnAsp;}if(match){uv.x=uv.x*plnAsp/imgAsp+(1.-plnAsp/imgAsp)*0.5;}else{uv.y=uv.y*imgAsp/plnAsp+(1.-imgAsp/plnAsp)*0.5;}return uv;}void main(){vec2 damping=vec2(0.01,0.015);float tilt=0.05;vec2 coords=coverTexture(vTexCoord,imageSize,planeSize,true);vec4 depthTex=texture2D(image1,coords);vec2 parallax=mousePos*damping*-1.0;parallax.y+=tilt-emerge*tilt;vec2 image3d=vec2(coords.x+(depthTex.r-0.5)*parallax.x,coords.y+(depthTex.r-0.5)*parallax.y);vec4 color=texture2D(image,image3d);color.a=depthTex.r*emerge*vTexCoord.y*1.5*alpha;gl_FragColor=color;}`});var nt,ys=h(()=>{"use strict";z();M();V();O();mt();ar();Si();gs();Ir();nt=class extends st{emergeState={value:0,type:b.FLOAT};container;preventImageCurl=!0;visibilityAnimation=!0;culling=!1;depthMap;mouseEmitter;async onCreate(){super.onCreate(),this.container=this.webgl.vp.getContainer(this.containerName),this.mesh.setScaleOrigin({x:.5,y:0}),this.mesh.loadTexture("image1",this.depthMap),this.mesh.model[14]=-.1}onListen(){return E(super.onListen(),this.container?.on(nr.SCROLL,({y:e})=>{this.mesh.translate({x:this.mesh.translation.x,y:this.observable.y+e*.95})}))}onEnter=f.to(this.emergeState,{value:1},{delay:200,duration:2e3,easing:y.easeOutSine,onUpdate:({value:e})=>{this.mesh&&this.mesh.scale(N(e,0,1,.9,1))}});onLeave=f.to(this.emergeState,{value:0},{easing:y.easeOutExpo,autoStart:!1,initSeek:!1,duration:1e3,onStart:()=>{this.onEnter.stop()},onUpdate:({value:e})=>{this.mesh&&this.mesh.scale(N(e,0,1,.9,1))}});get fragment(){return vs}get vertex(){return`
      attribute vec4 vertCoord;
      attribute vec2 texCoord;

      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;

      varying vec2 vTexCoord;

      void main() {
        vTexCoord = texCoord;
        gl_Position = projectionMatrix * modelViewMatrix * vertCoord;
      }
    `}get uniforms(){return{...super.uniforms,emerge:this.emergeState,mousePos:{value:this.mouseEmitter.glPosition,type:b.VEC2}}}get segments(){return 1}isVisible(){return!0}isInEntry(){return!0}async onDestroy(){await super.onDestroy()}};m([q("depthmap")],nt.prototype,"depthMap",2),m([x(Je,!0)],nt.prototype,"mouseEmitter",2),nt=m([A("image-webgl3d")],nt)});var Dt,bs=h(()=>{"use strict";z();O();pt();M();Dt=class extends D{video;constructor(e){super(e),this.video=ee("video",this.element),this.video.muted=!0,this.video.loop=!0}onListen(){return E(super.onListen(),this.animObservable.onVisChange(()=>{this.animObservable.visible?this.video.play():this.video.pause()}),S(this.element,"click",()=>{this.video.paused?this.video.play():this.video.pause()}))}createMesh(){let e=this.webgl.video({segments:this.segments,container:this.containerName,source:this.video,elementCulling:!1,element:this.element,vertex:this.vertex,fragment:this.fragment,uniforms:this.uniforms});return this.video.play(),Jr(this.video,"playing",()=>{setTimeout(()=>this.video.pause(),10)}),e}};Dt=m([A("video-webgl")],Dt)});var xs={};Pi(xs,{App:()=>Me});var Me,ws=h(()=>{"use strict";z();ge();re();Et();Ge();Jo();ts();rs();ss();as();cs();us();fs();ds();hr();Ir();ys();ur();Ar();Zt();Lr();zt();Re();Rr();Oi();kr();Pr();bs();Si();Be();Gt();tr();Me=class{webgl;router;tracker;composer;async onCreate(){let e=await this.router;(await this.tracker).enable();let[r]=this.composer.query(X);if(!r)throw new Error("ProjectSlider component not found");let o={router:e,slider:r.component,composer:this.composer};if(e.animate(ms(o),ps(o),es(o),Qo(o),ns(o),os(o),is(o),ls(o),hs(o)),e.on(R.AFTER_ENTER,()=>this.composer.update()),e.on(R.BEFORE_ENTER,({fromElement:s})=>{this.composer.query(P,s).forEach(({component:n})=>n.lockInteraction(!0))}),e.on(R.BEFORE_ENTER,({toElement:s})=>{this.composer.query(P,s).forEach(({component:n})=>n.lockInteraction(!1))}),e.on(R.BEFORE_ENTER,({toElement:s})=>s.style.display=""),e.on(R.AFTER_LEAVE,({fromElement:s})=>s.style.display="none"),this.webgl.activated){let s=await this.webgl;document.documentElement.classList.add("is-webgl"),s.gl.enable(s.gl.DEPTH_TEST),s.gl.disable(s.gl.CULL_FACE)}}};m([x(G)],Me.prototype,"webgl",2),m([x(_)],Me.prototype,"router",2),m([x(He)],Me.prototype,"tracker",2),m([I()],Me.prototype,"composer",2),Me=m([I({components:[X,P,Te,Dt,Se,tt,rt,Ye,ue,Ze,he,st,B,nt,it],services:[new _({routerConfig:{trigger:'a[href]:not([data-no-route]):not([target="_blank"]):not([target="blank"])'}}),new Le,new G({fov:35,premultipliedAlpha:!0}),new ve,new K,new Je,new He]})],Me);new Me});Ft();var Dr=!1;async function zn(){De()?(Dr=!0,await Promise.resolve().then(()=>(Uo(),No))):await Promise.resolve().then(()=>(ws(),xs))}zn();window.addEventListener("resize",()=>{let i=De();(i&&!Dr||!i&&Dr)&&window.location.reload()});console.log("%cCoded by Davide Perozzi @ https://perozzi.studio/","color: #535353; font-weight: bold; background: #e0e0e0; padding: 10px;");
